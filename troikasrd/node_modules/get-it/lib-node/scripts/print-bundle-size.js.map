{"version":3,"sources":["../../src/scripts/print-bundle-size.js"],"names":["fs","require","path","boxen","chalk","gzipSize","prettyBytes","read","filePath","Promise","resolve","reject","readFile","err","content","zip","zipSize","uncompressed","length","compressed","umdPath","join","__dirname","bundlePath","minPath","allPath","minAllPath","all","map","then","files","output","catch","throwOnError","res","text","size","console","log","padding","borderColor","align","code","Error","bytes","color"],"mappings":"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","file":"print-bundle-size.js","sourcesContent":["/* eslint-disable no-console */\nconst fs = require('fs')\nconst path = require('path')\nconst boxen = require('boxen')\nconst chalk = require('chalk')\nconst gzipSize = require('gzip-size')\nconst prettyBytes = require('pretty-bytes')\n\nconst read = filePath =>\n  new Promise((resolve, reject) => {\n    fs.readFile(filePath, (err, content) => {\n      if (err) {\n        reject(err)\n      } else {\n        resolve(content)\n      }\n    })\n  })\n\nconst zip = content =>\n  new Promise((resolve, reject) => {\n    gzipSize(content, (err, zipSize) => {\n      if (err) {\n        reject(err)\n      } else {\n        resolve({\n          uncompressed: content.length,\n          compressed: zipSize\n        })\n      }\n    })\n  })\n\nconst umdPath = path.join(__dirname, '..', '..', 'umd')\nconst bundlePath = path.join(umdPath, 'get-it.js')\nconst minPath = path.join(umdPath, 'get-it.min.js')\nconst allPath = path.join(umdPath, 'get-it-all.js')\nconst minAllPath = path.join(umdPath, 'get-it-all.min.js')\n\nPromise.all([bundlePath, minPath, allPath, minAllPath].map(read))\n  .then(files => Promise.all(files.map(zip)))\n  .then(output)\n  .catch(throwOnError)\n\nfunction output(res) {\n  const text = [\n    'UMD bundle size:',\n    '────────────────',\n    `Raw: ${size(res[0].uncompressed)}`,\n    `Raw + gzip: ${size(res[0].compressed)}`,\n    '',\n    `Minified: ${size(res[1].uncompressed)}`,\n    `Minified + gzip: ${size(res[1].compressed)}`,\n    '',\n    `Full bundle: ${size(res[2].uncompressed)}`,\n    `Full bundle + gzip: ${size(res[2].compressed)}`,\n    '',\n    `Full bundle, minified: ${size(res[3].uncompressed)}`,\n    `Full bundle, minified + gzip: ${size(res[3].compressed)}`\n  ].join('\\n')\n\n  console.log(\n    boxen(text, {\n      padding: 1,\n      borderColor: 'yellow',\n      align: 'right'\n    })\n  )\n}\n\nfunction throwOnError(err) {\n  if (err && err.code === 'ENOENT') {\n    throw new Error('File not found, did you run `npm run bundle` first?')\n  } else if (err) {\n    throw err\n  }\n}\n\nfunction size(bytes) {\n  const color = bytes > 1024 * 50 ? 'red' : 'green'\n  return chalk[color](prettyBytes(bytes))\n}\n"]}