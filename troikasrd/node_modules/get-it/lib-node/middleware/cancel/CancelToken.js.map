{"version":3,"sources":["../../../src/middleware/cancel/CancelToken.js"],"names":["Cancel","require","CancelToken","executor","TypeError","resolvePromise","promise","Promise","resolve","message","reason","source","cancel","token","can","module","exports"],"mappings":";;AAAA,MAAMA,SAASC,QAAQ,UAAR,CAAf;;AAEA,SAASC,WAAT,CAAqBC,QAArB,EAA+B;AAC7B,MAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC;AAClC,UAAM,IAAIC,SAAJ,CAAc,8BAAd,CAAN;AACD;;AAED,MAAIC,iBAAiB,IAArB;AACA,OAAKC,OAAL,GAAe,IAAIC,OAAJ,CAAYC,WAAW;AACpCH,qBAAiBG,OAAjB;AACD,GAFc,CAAf;;AAIAL,WAASM,WAAW;AAClB,QAAI,KAAKC,MAAT,EAAiB;AACf;AACA;AACD;;AAED,SAAKA,MAAL,GAAc,IAAIV,MAAJ,CAAWS,OAAX,CAAd;AACAJ,mBAAe,KAAKK,MAApB;AACD,GARD;AASD;;AAEDR,YAAYS,MAAZ,GAAqB,YAAW;AAC9B,MAAIC,MAAJ;AACA,QAAMC,QAAQ,IAAIX,WAAJ,CAAgBY,OAAO;AACnCF,aAASE,GAAT;AACD,GAFa,CAAd;;AAIA,SAAO;AACLD,WAAOA,KADF;AAELD,YAAQA;AAFH,GAAP;AAID,CAVD;;AAYAG,OAAOC,OAAP,GAAiBd,WAAjB","file":"CancelToken.js","sourcesContent":["const Cancel = require('./Cancel')\n\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.')\n  }\n\n  let resolvePromise = null\n  this.promise = new Promise(resolve => {\n    resolvePromise = resolve\n  })\n\n  executor(message => {\n    if (this.reason) {\n      // Cancellation has already been requested\n      return\n    }\n\n    this.reason = new Cancel(message)\n    resolvePromise(this.reason)\n  })\n}\n\nCancelToken.source = function() {\n  let cancel\n  const token = new CancelToken(can => {\n    cancel = can\n  })\n\n  return {\n    token: token,\n    cancel: cancel\n  }\n}\n\nmodule.exports = CancelToken\n"]}