{"version":3,"sources":["../../src/middleware/urlEncoded.js"],"names":["objectAssign","require","isPlainObject","urlEncode","encode","default","isBuffer","obj","constructor","module","exports","processOptions","options","body","isStream","pipe","shouldSerialize","headers"],"mappings":";;AAAA,MAAMA,eAAeC,QAAQ,eAAR,CAArB;AACA,MAAMC,gBAAgBD,QAAQ,iBAAR,CAAtB;AACA,MAAME,YAAYF,QAAQ,iBAAR,CAAlB;;AAEA,MAAMG,SAASD,UAAUE,OAAV,IAAqBF,SAApC;;AAEA,MAAMG,WAAWC,OACf,CAAC,CAACA,IAAIC,WAAN,IACA,OAAOD,IAAIC,WAAJ,CAAgBF,QAAvB,KAAoC,UADpC,IAEAC,IAAIC,WAAJ,CAAgBF,QAAhB,CAAyBC,GAAzB,CAHF;;AAKAE,OAAOC,OAAP,GAAiB,OAAO;AACtBC,kBAAgBC,WAAW;AACzB,UAAMC,OAAOD,QAAQC,IAArB;AACA,QAAI,CAACA,IAAL,EAAW;AACT,aAAOD,OAAP;AACD;;AAED,UAAME,WAAW,OAAOD,KAAKE,IAAZ,KAAqB,UAAtC;AACA,UAAMC,kBAAkB,CAACF,QAAD,IAAa,CAACR,SAASO,IAAT,CAAd,IAAgCX,cAAcW,IAAd,CAAxD;;AAEA,QAAI,CAACG,eAAL,EAAsB;AACpB,aAAOJ,OAAP;AACD;;AAED,WAAOZ,aAAa,EAAb,EAAiBY,OAAjB,EAA0B;AAC/BC,YAAMT,OAAOQ,QAAQC,IAAf,CADyB;AAE/BI,eAASjB,aAAa,EAAb,EAAiBY,QAAQK,OAAzB,EAAkC;AACzC,wBAAgB;AADyB,OAAlC;AAFsB,KAA1B,CAAP;AAMD;AApBqB,CAAP,CAAjB","file":"urlEncoded.js","sourcesContent":["const objectAssign = require('object-assign')\nconst isPlainObject = require('is-plain-object')\nconst urlEncode = require('form-urlencoded')\n\nconst encode = urlEncode.default || urlEncode\n\nconst isBuffer = obj =>\n  !!obj.constructor &&\n  typeof obj.constructor.isBuffer === 'function' &&\n  obj.constructor.isBuffer(obj)\n\nmodule.exports = () => ({\n  processOptions: options => {\n    const body = options.body\n    if (!body) {\n      return options\n    }\n\n    const isStream = typeof body.pipe === 'function'\n    const shouldSerialize = !isStream && !isBuffer(body) && isPlainObject(body)\n\n    if (!shouldSerialize) {\n      return options\n    }\n\n    return objectAssign({}, options, {\n      body: encode(options.body),\n      headers: objectAssign({}, options.headers, {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      })\n    })\n  }\n})\n"]}