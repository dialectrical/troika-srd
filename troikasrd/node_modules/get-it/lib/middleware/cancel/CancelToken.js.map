{"version":3,"sources":["../../../src/middleware/cancel/CancelToken.js"],"names":["Cancel","require","CancelToken","executor","TypeError","resolvePromise","promise","Promise","resolve","reason","message","source","cancel","token","can","module","exports"],"mappings":";;AAAA,IAAMA,SAASC,QAAQ,UAAR,CAAf;;AAEA,SAASC,WAAT,CAAqBC,QAArB,EAA+B;AAAA;;AAC7B,MAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC;AAClC,UAAM,IAAIC,SAAJ,CAAc,8BAAd,CAAN;AACD;;AAED,MAAIC,iBAAiB,IAArB;AACA,OAAKC,OAAL,GAAe,IAAIC,OAAJ,CAAY,mBAAW;AACpCF,qBAAiBG,OAAjB;AACD,GAFc,CAAf;;AAIAL,WAAS,mBAAW;AAClB,QAAI,MAAKM,MAAT,EAAiB;AACf;AACA;AACD;;AAED,UAAKA,MAAL,GAAc,IAAIT,MAAJ,CAAWU,OAAX,CAAd;AACAL,mBAAe,MAAKI,MAApB;AACD,GARD;AASD;;AAEDP,YAAYS,MAAZ,GAAqB,YAAW;AAC9B,MAAIC,eAAJ;AACA,MAAMC,QAAQ,IAAIX,WAAJ,CAAgB,eAAO;AACnCU,aAASE,GAAT;AACD,GAFa,CAAd;;AAIA,SAAO;AACLD,WAAOA,KADF;AAELD,YAAQA;AAFH,GAAP;AAID,CAVD;;AAYAG,OAAOC,OAAP,GAAiBd,WAAjB","file":"CancelToken.js","sourcesContent":["const Cancel = require('./Cancel')\n\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.')\n  }\n\n  let resolvePromise = null\n  this.promise = new Promise(resolve => {\n    resolvePromise = resolve\n  })\n\n  executor(message => {\n    if (this.reason) {\n      // Cancellation has already been requested\n      return\n    }\n\n    this.reason = new Cancel(message)\n    resolvePromise(this.reason)\n  })\n}\n\nCancelToken.source = function() {\n  let cancel\n  const token = new CancelToken(can => {\n    cancel = can\n  })\n\n  return {\n    token: token,\n    cancel: cancel\n  }\n}\n\nmodule.exports = CancelToken\n"]}