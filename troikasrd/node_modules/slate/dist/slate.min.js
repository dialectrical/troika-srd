!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).Slate={})}(this,(function(e){"use strict";var t=function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}};var r=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)};var n=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")};var o=function(e){return t(e)||r(e)||n()};var i=function(e){if(Array.isArray(e))return e};var a=function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}};var s=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")};var u=function(e,t){return i(e)||a(e,t)||s()};var c=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e};var f=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o};var l=function(e,t){if(null==e)return{};var r,n,o=f(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o},h="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function d(e,t){return e(t={exports:{}},t.exports),t.exports}var v=d((function(e){var t=function(e){var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(e,t,r,n){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),a=new j(n||[]);return i._invoke=function(e,t,r){var n=f;return function(o,i){if(n===h)throw new Error("Generator is already running");if(n===d){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=P(a,r);if(s){if(s===v)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var u=c(e,t,r);if("normal"===u.type){if(n=r.done?d:l,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=d,r.method="throw",r.arg=u.arg)}}}(e,r,a),i}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f="suspendedStart",l="suspendedYield",h="executing",d="completed",v={};function p(){}function y(){}function g(){}var m={};m[i]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(A([])));w&&w!==r&&n.call(w,i)&&(m=w);var x=g.prototype=p.prototype=Object.create(m);function O(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function k(e){var t;this._invoke=function(r,o){function i(){return new Promise((function(t,i){!function t(r,o,i,a){var s=c(e[r],e,o);if("throw"!==s.type){var u=s.arg,f=u.value;return f&&"object"==typeof f&&n.call(f,"__await")?Promise.resolve(f.__await).then((function(e){t("next",e,i,a)}),(function(e){t("throw",e,i,a)})):Promise.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return t("throw",e,i,a)}))}a(s.arg)}(r,o,t,i)}))}return t=t?t.then(i,i):i()}}function P(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method))return v;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=c(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function F(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function A(e){if(e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}return{next:S}}function S(){return{value:t,done:!0}}return y.prototype=x.constructor=g,g.constructor=y,g[s]=y.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},O(k.prototype),k.prototype[a]=function(){return this},e.AsyncIterator=k,e.async=function(t,r,n,o){var i=new k(u(t,r,n,o));return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},O(x),x[s]="Generator",x[i]=function(){return this},x.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=A,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(F),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),F(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;F(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}));
/*!
   * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   */
function p(e){return!0==(null!=(t=e)&&"object"==typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);
/*!
   * isobject <https://github.com/jonschlinkert/isobject>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   */
var t}function y(e){var t,r;return!1!==p(e)&&("function"==typeof(t=e.constructor)&&(!1!==p(r=t.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf")))}var g="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function m(){throw new Error("setTimeout has not been defined")}function b(){throw new Error("clearTimeout has not been defined")}var w=m,x=b;function O(e){if(w===setTimeout)return setTimeout(e,0);if((w===m||!w)&&setTimeout)return w=setTimeout,setTimeout(e,0);try{return w(e,0)}catch(t){try{return w.call(null,e,0)}catch(t){return w.call(this,e,0)}}}"function"==typeof g.setTimeout&&(w=setTimeout),"function"==typeof g.clearTimeout&&(x=clearTimeout);var k,P=[],E=!1,F=-1;function j(){E&&k&&(E=!1,k.length?P=k.concat(P):F=-1,P.length&&A())}function A(){if(!E){var e=O(j);E=!0;for(var t=P.length;t;){for(k=P,P=[];++F<t;)k&&k[F].run();F=-1,t=P.length}k=null,E=!1,function(e){if(x===clearTimeout)return clearTimeout(e);if((x===b||!x)&&clearTimeout)return x=clearTimeout,clearTimeout(e);try{x(e)}catch(t){try{return x.call(null,e)}catch(t){return x.call(this,e)}}}(e)}}function S(e,t){this.fun=e,this.array=t}S.prototype.run=function(){this.fun.apply(null,this.array)};function D(){}var N=D,_=D,T=D,C=D,R=D,B=D,z=D;var q=g.performance||{},I=q.now||q.mozNow||q.msNow||q.oNow||q.webkitNow||function(){return(new Date).getTime()};var L=new Date;var M,W={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];P.push(new S(e,t)),1!==P.length||E||O(A)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:N,addListener:_,once:T,off:C,removeListener:R,removeAllListeners:B,emit:z,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*I.call(q),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-L)/1e3}},V="undefined"!=typeof Symbol?Symbol("immer-nothing"):((M={})["immer-nothing"]=!0,M),J="undefined"!=typeof Symbol&&Symbol.for?Symbol.for("immer-draftable"):"__$immer_draftable",G="undefined"!=typeof Symbol&&Symbol.for?Symbol.for("immer-state"):"__$immer_state";function U(e){return!!e&&!!e[G]}function K(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e))return!0;var t=Object.getPrototypeOf(e);return!t||t===Object.prototype}(e)||!!e[J]||!!e.constructor[J]||ie(e)||se(e))}function Y(e){if(e&&e[G])return e[G].base}var $=Object.assign||function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return t.forEach((function(t){return Object.keys(t).forEach((function(r){return e[r]=t[r]}))})),e},Z="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function H(e,t){if(void 0===t&&(t=!1),Array.isArray(e))return e.slice();if(ie(e))return new Map(e);if(se(e))return new Set(e);var r=Object.create(Object.getPrototypeOf(e));return Z(e).forEach((function(n){if(n!==G){var o=Object.getOwnPropertyDescriptor(e,n),i=o.value;if(o.get){if(!t)throw new Error("Immer drafts cannot have computed properties");i=o.get.call(e)}o.enumerable?r[n]=i:Object.defineProperty(r,n,{value:i,writable:!0,configurable:!0})}})),r}function Q(e,t){Array.isArray(e)||ie(e)||se(e)?e.forEach((function(r,n){return t(n,r,e)})):Z(e).forEach((function(r){return t(r,e[r],e)}))}function X(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return!!r&&r.enumerable}function ee(e,t){return ie(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function te(e,t){return ie(e)?e.get(t):e[t]}function re(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}var ne="undefined"!=typeof Symbol,oe="undefined"!=typeof Map;function ie(e){return oe&&e instanceof Map}var ae="undefined"!=typeof Set;function se(e){return ae&&e instanceof Set}function ue(e){var t,r;return(t={})[Symbol.iterator]=function(){return r},t.next=e,r=t}function ce(e,t,r){var n="values"!==t;return function(){var t=le(e)[Symbol.iterator]();return ue((function(){var e=t.next();if(!e.done){var o=e.value[0],i=r.get(o);e.value=n?[o,i]:i}return e}))}}function fe(e){return function(t,r){var n="entries"===r;return function(){var r=le(t)[Symbol.iterator]();return ue((function(){var o=r.next();if(!o.done){var i=function(t,r){var n=Y(r)||r,o=t.drafts.get(n);if(!o){if(t.finalized||!K(r)||t.finalizing)return r;o=e(r,t),t.drafts.set(n,o),t.modified&&t.copy.add(o)}return o}(t,o.value);o.value=n?[i,i]:i}return o}))}}}function le(e){return e.copy||e.base}function he(e){if(!K(e))return e;if(Array.isArray(e))return e.map(he);if(ie(e))return new Map(e);if(se(e))return new Set(e);var t=Object.create(Object.getPrototypeOf(e));for(var r in e)t[r]=he(e[r]);return t}function de(e,t){void 0===t&&(t=!1),!K(e)||U(e)||Object.isFrozen(e)||(se(e)?e.add=e.clear=e.delete=ve:ie(e)&&(e.set=e.clear=e.delete=ve),Object.freeze(e),t&&Q(e,(function(e,t){return de(t,!0)})))}function ve(){throw new Error("This object has been frozen and should not be mutated")}var pe=function(e){this.drafts=[],this.parent=e,this.canAutoFreeze=!0,this.patches=null};function ye(e){e[G].revoke()}function ge(e,t){var r,n=Array.isArray(e),o=ke(e);ie(e)?(r=o,Object.defineProperties(r,Ee),ne&&Object.defineProperty(r,Symbol.iterator,De(ce))):se(e)?function(e){Object.defineProperties(e,je),ne&&Object.defineProperty(e,Symbol.iterator,De(Fe))}(o):Q(o,(function(t){!function(e,t,r){var n=Pe[t];n?n.enumerable=r:Pe[t]=n={configurable:!0,enumerable:r,get:function(){return function(e,t){Ne(e);var r=we(be(e),t);if(e.finalizing)return r;if(r===we(e.base,t)&&K(r))return Oe(e),e.copy[t]=ge(r,e);return r}(this[G],t)},set:function(e){!function(e,t,r){if(Ne(e),e.assigned[t]=!0,!e.modified){if(re(r,we(be(e),t)))return;xe(e),Oe(e)}e.copy[t]=r}(this[G],t,e)}};Object.defineProperty(e,t,n)}(o,t,n||X(e,t))}));var i=t?t.scope:pe.current,a={scope:i,modified:!1,finalizing:!1,finalized:!1,assigned:ie(e)?new Map:{},parent:t,base:e,draft:o,drafts:se(e)?new Map:null,copy:null,revoke:me,revoked:!1};return function(e,t,r){Object.defineProperty(e,t,{value:r,enumerable:!1,writable:!0})}(o,G,a),i.drafts.push(o),o}function me(){this.revoked=!0}function be(e){return e.copy||e.base}function we(e,t){var r=e[G];if(r&&!r.finalizing){r.finalizing=!0;var n=e[t];return r.finalizing=!1,n}return e[t]}function xe(e){e.modified||(e.modified=!0,e.parent&&xe(e.parent))}function Oe(e){e.copy||(e.copy=ke(e.base))}function ke(e){var t=e&&e[G];if(t){t.finalizing=!0;var r=H(t.draft,!0);return t.finalizing=!1,r}return H(e)}pe.prototype.usePatches=function(e){e&&(this.patches=[],this.inversePatches=[],this.patchListener=e)},pe.prototype.revoke=function(){this.leave(),this.drafts.forEach(ye),this.drafts=null},pe.prototype.leave=function(){this===pe.current&&(pe.current=this.parent)},pe.current=null,pe.enter=function(){return this.current=new pe(this.current)};var Pe={};var Ee=Ae({size:function(e){return be(e).size},has:function(e){return function(t){return be(e).has(t)}},set:function(e){return function(t,r){return be(e).get(t)!==r&&(Oe(e),xe(e),e.assigned.set(t,!0),e.copy.set(t,r)),e.draft}},delete:function(e){return function(t){return Oe(e),xe(e),e.assigned.set(t,!1),e.copy.delete(t),!1}},clear:function(e){return function(){e.copy||Oe(e),xe(e),e.assigned=new Map;for(var t=0,r=be(e).keys();t<r.length;t+=1){var n=r[t];e.assigned.set(n,!1)}return e.copy.clear()}},forEach:function(e,t,r){return function(t){be(e).forEach((function(e,n,o){t(r.get(n),n,o)}))}},get:function(e){return function(t){var r=be(e).get(t);if(e.finalizing||e.finalized||!K(r))return r;if(r!==e.base.get(t))return r;var n=ge(r,e);return Oe(e),e.copy.set(t,n),n}},keys:function(e){return function(){return be(e).keys()}},values:ce,entries:ce});var Fe=fe(ge),je=Ae({size:function(e){return be(e).size},add:function(e){return function(t){return be(e).has(t)||(xe(e),e.copy||Oe(e),e.copy.add(t)),e.draft}},delete:function(e){return function(t){return xe(e),e.copy||Oe(e),e.copy.delete(t)}},has:function(e){return function(t){return be(e).has(t)}},clear:function(e){return function(){return xe(e),e.copy||Oe(e),e.copy.clear()}},keys:Fe,entries:Fe,values:Fe,forEach:function(e){return function(t,r){for(var n=Fe(e)(),o=n.next();!o.done;)t.call(r,o.value,o.value,e.draft),o=n.next()}}});function Ae(e){return Object.keys(e).reduce((function(t,r){var n="size"===r?Se:De;return t[r]=n(e[r],r),t}),{})}function Se(e){return{get:function(){var t=this[G];return Ne(t),e(t)}}}function De(e,t){return{get:function(){return function(){for(var r=[],n=arguments.length;n--;)r[n]=arguments[n];var o=this[G];return Ne(o),e(o,t,o.draft).apply(void 0,r)}}}}function Ne(e){if(!0===e.revoked)throw new Error("Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+JSON.stringify(be(e)))}function _e(e){for(var t=e.length-1;t>=0;t--){var r=e[t][G];r.modified||(Array.isArray(r.base)?Ce(r)&&xe(r):ie(r.base)?Re(r)&&xe(r):se(r.base)?Be(r)&&xe(r):Te(r)&&xe(r))}}function Te(e){for(var t=e.base,r=e.draft,n=Object.keys(r),o=n.length-1;o>=0;o--){var i=n[o],a=t[i];if(void 0===a&&!ee(t,i))return!0;var s=r[i],u=s&&s[G];if(u?u.base!==a:!re(s,a))return!0}return n.length!==Object.keys(t).length}function Ce(e){var t=e.draft;if(t.length!==e.base.length)return!0;var r=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!r||r.get)}function Re(e){var t=e.base,r=e.draft;if(t.size!==r.size)return!0;var n=!1;return r.forEach((function(e,r){n||(n=K(e)?e.modified:e!==t.get(r))})),n}function Be(e){var t=e.base,r=e.draft;if(t.size!==r.size)return!0;var n=!1;return r.forEach((function(e,r){n||(n=K(e)?e.modified:!t.has(r))})),n}var ze,qe,Ie=Object.freeze({willFinalize:function(e,t,r){e.drafts.forEach((function(e){e[G].finalizing=!0})),r?U(t)&&t[G].scope===e&&_e(e.drafts):(e.patches&&function e(t){if(!t||"object"!=typeof t)return;var r=t[G];if(!r)return;var n=r.base,o=r.draft,i=r.assigned;if(Array.isArray(t)){if(Ce(r)){if(xe(r),i.length=!0,o.length<n.length)for(var a=o.length;a<n.length;a++)i[a]=!1;else for(var s=n.length;s<o.length;s++)i[s]=!0;for(var u=0;u<o.length;u++)void 0===i[u]&&e(o[u])}}else Object.keys(o).forEach((function(t){void 0!==n[t]||ee(n,t)?i[t]||e(o[t]):(i[t]=!0,xe(r))})),Object.keys(n).forEach((function(e){void 0!==o[e]||ee(o,e)||(i[e]=!1,xe(r))}))}(e.drafts[0]),_e(e.drafts))},createProxy:ge});function Le(e,t){var r=t?t.scope:pe.current,n={scope:r,modified:!1,finalized:!1,assigned:{},parent:t,base:e,draft:null,drafts:{},copy:null,revoke:null},o=n,i=Me;Array.isArray(e)?(o=[n],i=We):ie(e)?(i=Je,n.drafts=new Map,n.assigned=new Map):se(e)&&(i=Ue,n.drafts=new Map);var a=Proxy.revocable(o,i),s=a.revoke,u=a.proxy;return n.draft=u,n.revoke=s,r.drafts.push(u),u}var Me={get:function(e,t){if(t===G)return e;var r=e.drafts;if(!e.modified&&ee(r,t))return r[t];var n=Ke(e)[t];if(e.finalized||!K(n))return n;if(e.modified){if(n!==Ye(e.base,t))return n;r=e.copy}return r[t]=Le(n,e)},has:function(e,t){return t in Ke(e)},ownKeys:function(e){return Reflect.ownKeys(Ke(e))},set:function(e,t,r){if(!e.modified){var n=Ye(e.base,t);if(r?re(n,r)||r===e.drafts[t]:re(n,r)&&t in e.base)return!0;$e(e)}return e.assigned[t]=!0,e.copy[t]=r,!0},deleteProperty:function(e,t){return void 0!==Ye(e.base,t)||t in e.base?(e.assigned[t]=!1,$e(e)):e.assigned[t]&&delete e.assigned[t],e.copy&&delete e.copy[t],!0},getOwnPropertyDescriptor:function(e,t){var r=Ke(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&(n.writable=!0,n.configurable=!Array.isArray(r)||"length"!==t),n},defineProperty:function(){throw new Error("Object.defineProperty() cannot be used on an Immer draft")},getPrototypeOf:function(e){return Object.getPrototypeOf(e.base)},setPrototypeOf:function(){throw new Error("Object.setPrototypeOf() cannot be used on an Immer draft")}},We={};Q(Me,(function(e,t){We[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),We.deleteProperty=function(e,t){if(isNaN(parseInt(t)))throw new Error("Immer only supports deleting array indices");return Me.deleteProperty.call(this,e[0],t)},We.set=function(e,t,r){if("length"!==t&&isNaN(parseInt(t)))throw new Error("Immer only supports setting array indices and the 'length' property");return Me.set.call(this,e[0],t,r)};var Ve=["ownKeys","has","set","deleteProperty","defineProperty","getOwnPropertyDescriptor","preventExtensions","isExtensible","getPrototypeOf"].reduce((function(e,t){return e[t]=function(e){for(var r=[],n=arguments.length-1;n-- >0;)r[n]=arguments[n+1];return Reflect[t].apply(Reflect,[Ke(e)].concat(r))},e}),{}),Je=Ze(((ze={})[G]=function(e){return e},ze.size=function(e){return Ke(e).size},ze.has=function(e){return function(t){return Ke(e).has(t)}},ze.set=function(e){return function(t,r){var n=Ke(e);return n.has(t)&&n.get(t)===r||($e(e),e.assigned.set(t,!0),e.copy.set(t,r)),e.draft}},ze.delete=function(e){return function(t){return!!Ke(e).has(t)&&($e(e),e.assigned.set(t,!1),e.copy.delete(t))}},ze.clear=function(e){return function(){$e(e),e.assigned=new Map;for(var t=0,r=Ke(e).keys();t<r.length;t+=1){var n=r[t];e.assigned.set(n,!1)}return e.copy.clear()}},ze.forEach=function(e,t,r){return function(t,n){return Ke(e).forEach((function(e,o,i){var a=r.get(o);t.call(n,a,o,i)}))}},ze.get=function(e){return function(t){var r=e[e.modified?"copy":"drafts"];if(r.has(t))return r.get(t);var n=Ke(e).get(t);if(e.finalized||!K(n))return n;var o=Le(n,e);return r.set(t,o),o}},ze.keys=function(e){return function(){return Ke(e).keys()}},ze.values=ce,ze.entries=ce,ze[ne?Symbol.iterator:"@@iterator"]=ce,ze)),Ge=fe(Le),Ue=Ze(((qe={})[G]=function(e){return e},qe.size=function(e){return Ke(e).size},qe.has=function(e){return function(t){return Ke(e).has(t)}},qe.add=function(e){return function(t){return Ke(e).has(t)||($e(e),e.copy.add(t)),e.draft}},qe.delete=function(e){return function(t){return $e(e),e.copy.delete(t)}},qe.clear=function(e){return function(){return $e(e),e.copy.clear()}},qe.forEach=function(e){return function(t,r){for(var n=Ge(e)(),o=n.next();!o.done;)t.call(r,o.value,o.value,e.draft),o=n.next()}},qe.keys=Ge,qe.values=Ge,qe.entries=Ge,qe[ne?Symbol.iterator:"@@iterator"]=Ge,qe));function Ke(e){return e.copy||e.base}function Ye(e,t){var r=e[G],n=Reflect.getOwnPropertyDescriptor(r?Ke(r):e,t);return n&&n.value}function $e(e){if(!e.modified){e.modified=!0;var t=e.base,r=e.drafts,n=e.parent,o=H(t);se(t)?(i=o,r.forEach((function(e){var t=Y(e);t&&i.delete(t),i.add(e)}))):(ie(t)?function(e,t){t.forEach((function(t,r){return e.set(r,t)}))}(o,r):$(o,r),e.drafts=null),e.copy=o,n&&$e(n)}var i}function Ze(e){return Object.assign({},Ve,{get:function(t,r,n){return e.hasOwnProperty(r)?e[r](t,r,n):Reflect.get(t,r,n)},setPrototypeOf:function(e){throw new Error("Object.setPrototypeOf() cannot be used on an Immer draft")}})}var He=Object.freeze({willFinalize:function(){},createProxy:Le});function Qe(e,t,r,n){var o,i,a=e.base,s=e.copy,u=e.assigned;s.length<a.length&&(a=(o=[s,a])[0],s=o[1],r=(i=[n,r])[0],n=i[1]);for(var c=s.length-a.length,f=0;a[f]===s[f]&&f<a.length;)++f;for(var l=a.length;l>f&&a[l-1]===s[l+c-1];)--l;for(var h=f;h<l;++h)if(u[h]&&s[h]!==a[h]){var d=t.concat([h]);r.push({op:"replace",path:d,value:s[h]}),n.push({op:"replace",path:d,value:a[h]})}for(var v=r.length,p=l+c-1;p>=l;--p){var y=t.concat([p]);r[v+p-l]={op:"add",path:y,value:s[p]},n.push({op:"remove",path:y})}}function Xe(e,t,r,n){var o=e.base,i=e.copy;Q(e.assigned,(function(e,a){var s=te(o,e),u=te(i,e),c=a?ee(o,e)?"replace":"add":"remove";if(s!==u||"replace"!==c){var f=t.concat(e);r.push("remove"===c?{op:c,path:f}:{op:c,path:f,value:u}),n.push("add"===c?{op:"remove",path:f}:"remove"===c?{op:"add",path:f,value:s}:{op:"replace",path:f,value:s})}}))}function et(e,t,r,n){for(var o=e.base,i=e.copy,a=0,s=0,u=o;s<u.length;s+=1){var c=u[s];if(!i.has(c)){var f=t.concat([a]);r.push({op:"remove",path:f,value:c}),n.unshift({op:"add",path:f,value:c})}a++}a=0;for(var l=0,h=i;l<h.length;l+=1){var d=h[l];if(!o.has(d)){var v=t.concat([a]);r.push({op:"add",path:v,value:d}),n.unshift({op:"remove",path:v,value:d})}a++}}var tt=function(e,t){for(var r=0,n=t;r<n.length;r+=1){var o=n[r],i=o.path,a=o.op;if(!i.length)throw new Error("Illegal state");for(var s=e,u=0;u<i.length-1;u++)if(!(s=te(s,i[u]))||"object"!=typeof s)throw new Error("Cannot apply patch, path doesn't resolve: "+i.join("/"));var c=he(o.value),f=i[i.length-1];switch(a){case"replace":if(ie(s))s.set(f,c);else{if(se(s))throw new Error('Sets cannot have "replace" patches.');s[f]=c}break;case"add":se(s)&&s.delete(o.value),Array.isArray(s)?s.splice(f,0,c):ie(s)?s.set(f,c):se(s)?s.add(c):s[f]=c;break;case"remove":Array.isArray(s)?s.splice(f,1):ie(s)?s.delete(f):se(s)?s.delete(o.value):delete s[f];break;default:throw new Error("Unsupported patch operation: "+a)}}return e};var rt={useProxies:"undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,autoFreeze:void 0===W&&"verifyMinified"===function(){}.name,onAssign:null,onDelete:null,onCopy:null},nt=function(e){$(this,rt,e),this.setUseProxies(this.useProxies),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)};nt.prototype.produce=function(e,t,r){var n,o=this;if("function"==typeof e&&"function"!=typeof t){var i=t;t=e;var a=this;return function(e){var r=this;void 0===e&&(e=i);for(var n=[],o=arguments.length-1;o-- >0;)n[o]=arguments[o+1];return a.produce(e,(function(e){return t.call.apply(t,[r,e].concat(n))}))}}if("function"!=typeof t)throw new Error("The first or second argument to `produce` must be a function");if(void 0!==r&&"function"!=typeof r)throw new Error("The third argument to `produce` must be a function or undefined");if(K(e)){var s=pe.enter(),u=this.createProxy(e),c=!0;try{n=t(u),c=!1}finally{c?s.revoke():s.leave()}return"undefined"!=typeof Promise&&n instanceof Promise?n.then((function(e){return s.usePatches(r),o.processResult(e,s)}),(function(e){throw s.revoke(),e})):(s.usePatches(r),this.processResult(n,s))}if((n=t(e))!==V)return void 0===n&&(n=e),this.maybeFreeze(n,!0),n},nt.prototype.produceWithPatches=function(e,t,r){var n,o,i=this;if("function"==typeof e)return function(t){for(var r=[],n=arguments.length-1;n-- >0;)r[n]=arguments[n+1];return i.produceWithPatches(t,(function(t){return e.apply(void 0,[t].concat(r))}))};if(r)throw new Error("A patch listener cannot be passed to produceWithPatches");return[this.produce(e,t,(function(e,t){n=e,o=t})),n,o]},nt.prototype.createDraft=function(e){if(!K(e))throw new Error("First argument to `createDraft` must be a plain object, an array, or an immerable object");var t=pe.enter(),r=this.createProxy(e);return r[G].isManual=!0,t.leave(),r},nt.prototype.finishDraft=function(e,t){var r=e&&e[G];if(!r||!r.isManual)throw new Error("First argument to `finishDraft` must be a draft returned by `createDraft`");if(r.finalized)throw new Error("The given draft is already finalized");var n=r.scope;return n.usePatches(t),this.processResult(void 0,n)},nt.prototype.setAutoFreeze=function(e){this.autoFreeze=e},nt.prototype.setUseProxies=function(e){this.useProxies=e,$(this,e?He:Ie)},nt.prototype.applyPatches=function(e,t){var r;for(r=t.length-1;r>=0;r--){var n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}return U(e)?tt(e,t):this.produce(e,(function(e){return tt(e,t.slice(r+1))}))},nt.prototype.processResult=function(e,t){var r=t.drafts[0],n=void 0!==e&&e!==r;if(this.willFinalize(t,e,n),n){if(r[G].modified)throw t.revoke(),new Error("An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.");K(e)&&(e=this.finalize(e,null,t),this.maybeFreeze(e)),t.patches&&(t.patches.push({op:"replace",path:[],value:e}),t.inversePatches.push({op:"replace",path:[],value:r[G].base}))}else e=this.finalize(r,[],t);return t.revoke(),t.patches&&t.patchListener(t.patches,t.inversePatches),e!==V?e:void 0},nt.prototype.finalize=function(e,t,r){var n=this,o=e[G];if(!o)return Object.isFrozen(e)?e:this.finalizeTree(e,null,r);if(o.scope!==r)return e;if(!o.modified)return this.maybeFreeze(o.base,!0),o.base;if(!o.finalized){if(o.finalized=!0,this.finalizeTree(o.draft,t,r),this.onDelete&&!se(o.base))if(this.useProxies){Q(o.assigned,(function(e,t){t||n.onDelete(o,e)}))}else{var i=o.base,a=o.copy;Q(i,(function(e){ee(a,e)||n.onDelete(o,e)}))}this.onCopy&&this.onCopy(o),this.autoFreeze&&r.canAutoFreeze&&de(o.copy,!1),t&&r.patches&&function(e,t,r,n){(Array.isArray(e.base)?Qe:se(e.base)?et:Xe)(e,t,r,n)}(o,t,r.patches,r.inversePatches)}return o.copy},nt.prototype.finalizeTree=function(e,t,r){var n=this,o=e[G];o&&(this.useProxies||(o.copy=H(o.draft,!0)),e=o.copy);var i=!!t&&!!r.patches,a=function(s,u,c){if(u===c)throw Error("Immer forbids circular references");var f=!!o&&c===e,l=se(c);if(U(u)){var h=f&&i&&!l&&!ee(o.assigned,s)?t.concat(s):null;if(function(e,t,r){ie(e)?e.set(t,r):se(e)?(e.delete(t),e.add(r)):Array.isArray(e)||X(e,t)?e[t]=r:Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0})}(c,s,u=n.finalize(u,h,r)),U(u)&&(r.canAutoFreeze=!1),f&&u===te(o.base,s))return}else{if(f&&re(u,te(o.base,s)))return;K(u)&&!Object.isFrozen(u)&&(Q(u,a),n.maybeFreeze(u))}f&&n.onAssign&&!l&&n.onAssign(o,s,u)};return Q(e,a),e},nt.prototype.maybeFreeze=function(e,t){void 0===t&&(t=!1),this.autoFreeze&&!U(e)&&de(e,t)};var ot=new nt,it=ot.produce,at=(ot.produceWithPatches.bind(ot),ot.setAutoFreeze.bind(ot),ot.setUseProxies.bind(ot),ot.applyPatches.bind(ot),ot.createDraft.bind(ot)),st=ot.finishDraft.bind(ot),ut=d((function(e,t){!function(r){var n=t,o=e&&e.exports==n&&e,i="object"==typeof h&&h;i.global!==i&&i.window!==i||(r=i);var a=/([\0-\u02FF\u0370-\u1AAF\u1B00-\u1DBF\u1E00-\u20CF\u2100-\uD7FF\uE000-\uFE1F\uFE30-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])([\u0300-\u036F\u1AB0-\u1AFF\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]+)/g,s=/([\uD800-\uDBFF])([\uDC00-\uDFFF])/g,u=function(e){for(var t="",r=(e=e.replace(a,(function(e,t,r){return u(r)+t})).replace(s,"$2$1")).length;r--;)t+=e.charAt(r);return t},c={version:"0.2.0",reverse:u};if(n&&!n.nodeType)if(o)o.exports=c;else for(var f in c)c.hasOwnProperty(f)&&(n[f]=c[f]);else r.esrever=c}(h)})).reverse,ct=new WeakMap,ft=new WeakMap,lt=new WeakMap,ht=new WeakMap,dt=new WeakMap,vt=new WeakMap,pt=/\s/,yt=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,gt=/['\u2018\u2019]/,mt=function(e){for(var t=0,r=null,n=e.charCodeAt(0);n;)if(xt(n)){var o=Ot(n,e,t);if("SURR"===r||"BMP"===r)break;t+=2,r=o?"MOD":"SURR",n=e.charCodeAt(t)}else if(8205!==n)if(Pt(n)){if(r&&"ZWJ"!==r&&"VAR"!==r)break;t+=1,r="BMP",n=e.charCodeAt(t)}else{if(!kt(n)){if("MOD"===r){t+=1;break}break}if(r&&"ZWJ"!==r)break;t+=1,r="VAR",n=e.charCodeAt(t)}else t+=1,r="ZWJ",n=e.charCodeAt(t);return t||1},bt=function(e){for(var t,r=0,n=0,o=!1;t=e.charAt(n);){var i=mt(t);t=e.slice(n,n+i);var a=e.slice(n+i);if(wt(t,a))o=!0,r+=i;else{if(o)break;r+=i}n+=i}return r},wt=function e(t,r){if(pt.test(t))return!1;if(gt.test(t)){var n=r.charAt(0),o=mt(n);if(e(n=r.slice(0,o),r.slice(o)))return!0}return!yt.test(t)},xt=function(e){return 55296<=e&&e<=57343},Ot=function(e,t,r){if(55356===e){var n=t.charCodeAt(r+1);return n<=57343&&n>=57339}return!1},kt=function(e){return e<=65039&&e>=65024},Pt=function(e){return 10084===e||9794===e||9792===e||9760===e||9877===e||9992===e||9711===e};function Et(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ft(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Et(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var jt={above:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.voids,n=void 0!==r&&r,o=t.mode,i=void 0===o?"lowest":o,a=t.at,s=void 0===a?e.selection:a,c=t.match;if(s){var f=jt.path(e,s),l="lowest"===i,h=!0,d=!1,v=void 0;try{for(var p,y=jt.levels(e,{at:f,voids:n,match:c,reverse:l})[Symbol.iterator]();!(h=(p=y.next()).done);h=!0){var g=u(p.value,2),m=g[0],b=g[1];if(!Ut.isText(m)&&!Rt.equals(f,b))return[m,b]}}catch(e){d=!0,v=e}finally{try{h||null==y.return||y.return()}finally{if(d)throw v}}}},addMark:function(e,t,r){e.addMark(t,r)},after:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=jt.point(e,t,{edge:"end"}),i=jt.end(e,[]),a={anchor:o,focus:i},s=n.distance,u=void 0===s?1:s,c=0,f=!0,l=!1,h=void 0;try{for(var d,v=jt.positions(e,Ft({},n,{at:a}))[Symbol.iterator]();!(f=(d=v.next()).done);f=!0){var p=d.value;if(c>u)break;0!==c&&(r=p),c++}}catch(e){l=!0,h=e}finally{try{f||null==v.return||v.return()}finally{if(l)throw h}}return r},before:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=jt.start(e,[]),i=jt.point(e,t,{edge:"start"}),a={anchor:o,focus:i},s=n.distance,u=void 0===s?1:s,c=0,f=!0,l=!1,h=void 0;try{for(var d,v=jt.positions(e,Ft({},n,{at:a,reverse:!0}))[Symbol.iterator]();!(f=(d=v.next()).done);f=!0){var p=d.value;if(c>u)break;0!==c&&(r=p),c++}}catch(e){l=!0,h=e}finally{try{f||null==v.return||v.return()}finally{if(l)throw h}}return r},deleteBackward:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.unit,n=void 0===r?"character":r;e.deleteBackward(n)},deleteForward:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.unit,n=void 0===r?"character":r;e.deleteForward(n)},deleteFragment:function(e){e.deleteFragment()},edges:function(e,t){return[jt.start(e,t),jt.end(e,t)]},end:function(e,t){return jt.point(e,t,{edge:"end"})},first:function(e,t){var r=jt.path(e,t,{edge:"start"});return jt.node(e,r)},fragment:function(e,t){var r=jt.range(e,t),n=Nt.fragment(e,r);return n},hasBlocks:function(e,t){return t.children.some((function(t){return jt.isBlock(e,t)}))},hasInlines:function(e,t){return t.children.some((function(t){return Ut.isText(t)||jt.isInline(e,t)}))},hasTexts:function(e,t){return t.children.every((function(e){return Ut.isText(e)}))},insertBreak:function(e){e.insertBreak()},insertFragment:function(e,t){e.insertFragment(t)},insertNode:function(e,t){e.insertNode(t)},insertText:function(e,t){e.insertText(t)},isBlock:function(e,t){return At.isElement(t)&&!e.isInline(t)},isEditor:function(e){return y(e)&&"function"==typeof e.addMark&&"function"==typeof e.apply&&"function"==typeof e.deleteBackward&&"function"==typeof e.deleteForward&&"function"==typeof e.deleteFragment&&"function"==typeof e.insertBreak&&"function"==typeof e.insertFragment&&"function"==typeof e.insertNode&&"function"==typeof e.insertText&&"function"==typeof e.isInline&&"function"==typeof e.isVoid&&"function"==typeof e.normalizeNode&&"function"==typeof e.onChange&&"function"==typeof e.removeMark&&(null===e.marks||y(e.marks))&&(null===e.selection||Wt.isRange(e.selection))&&Nt.isNodeList(e.children)&&Ct.isOperationList(e.operations)},isEnd:function(e,t,r){var n=jt.end(e,r);return It.equals(t,n)},isEdge:function(e,t,r){return jt.isStart(e,t,r)||jt.isEnd(e,t,r)},isEmpty:function(e,t){var r=t.children,n=u(r,1)[0];return 0===r.length||1===r.length&&Ut.isText(n)&&""===n.text&&!e.isVoid(t)},isInline:function(e,t){return At.isElement(t)&&e.isInline(t)},isNormalizing:function(e){var t=lt.get(e);return void 0===t||t},isStart:function(e,t,r){if(0!==t.offset)return!1;var n=jt.start(e,r);return It.equals(t,n)},isVoid:function(e,t){return At.isElement(t)&&e.isVoid(t)},last:function(e,t){var r=jt.path(e,t,{edge:"end"});return jt.node(e,r)},leaf:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=jt.path(e,t,r),o=Nt.leaf(e,n);return[o,n]},levels:v.mark((function(e){var t,r,n,o,i,a,s,c,f,l,h,d,p,y,g,m,b,w,x=arguments;return v.wrap((function(v){for(;;)switch(v.prev=v.next){case 0:if(t=x.length>1&&void 0!==x[1]?x[1]:{},r=t.at,n=void 0===r?e.selection:r,o=t.reverse,i=void 0!==o&&o,a=t.voids,s=void 0!==a&&a,null==(c=t.match)&&(c=function(){return!0}),n){v.next=6;break}return v.abrupt("return");case 6:f=[],l=jt.path(e,n),h=!0,d=!1,p=void 0,v.prev=11,y=Nt.levels(e,l)[Symbol.iterator]();case 13:if(h=(g=y.next()).done){v.next=23;break}if(m=u(g.value,2),b=m[0],w=m[1],c(b)){v.next=17;break}return v.abrupt("continue",20);case 17:if(f.push([b,w]),s||!jt.isVoid(e,b)){v.next=20;break}return v.abrupt("break",23);case 20:h=!0,v.next=13;break;case 23:v.next=29;break;case 25:v.prev=25,v.t0=v.catch(11),d=!0,p=v.t0;case 29:v.prev=29,v.prev=30,h||null==y.return||y.return();case 32:if(v.prev=32,!d){v.next=35;break}throw p;case 35:return v.finish(32);case 36:return v.finish(29);case 37:return i&&f.reverse(),v.delegateYield(f,"t1",39);case 39:case"end":return v.stop()}}),f,null,[[11,25,29,37],[30,,32,36]])})),marks:function(e){var t=e.marks,r=e.selection;if(!r)return null;if(t)return t;if(Wt.isExpanded(r)){var n=jt.nodes(e,{match:Ut.isText}),o=u(n,1)[0];if(o){var i=u(o,1)[0];i.text;return l(i,["text"])}return{}}var a=r.anchor,s=a.path,c=jt.leaf(e,s),f=u(c,1)[0];if(0===a.offset){var h=jt.previous(e,{at:s,match:Ut.isText}),d=jt.above(e,{match:function(t){return jt.isBlock(e,t)}});if(h&&d){var v=u(h,2),p=v[0],y=v[1],g=u(d,2)[1];Rt.isAncestor(g,y)&&(f=p)}}var m=f;m.text;return l(m,["text"])},next:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.mode,n=void 0===r?"lowest":r,o=t.voids,i=void 0!==o&&o,a=t.match,s=t.at,c=void 0===s?e.selection:s;if(c){var f=jt.last(e,c),l=u(f,2),h=l[1],d=jt.last(e,[]),v=u(d,2),p=v[1],y=[h,p];if(Rt.isPath(c)&&0===c.length)throw new Error("Cannot get the next node from the root node!");if(null==a)if(Rt.isPath(c)){var g=jt.parent(e,c),m=u(g,1),b=m[0];a=function(e){return b.children.includes(e)}}else a=function(){return!0};var w=jt.nodes(e,{at:y,match:a,mode:n,voids:i}),x=u(w,2),O=x[1];return O}},node:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=jt.path(e,t,r),o=Nt.get(e,n);return[o,n]},nodes:v.mark((function e(t){var r,n,o,i,a,s,c,f,l,h,d,p,y,g,m,b,w,x,O,k,P,E,F,j,A,S,D,N,_,T=arguments;return v.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=T.length>1&&void 0!==T[1]?T[1]:{},n=r.at,o=void 0===n?t.selection:n,i=r.mode,a=void 0===i?"all":i,s=r.universal,c=void 0!==s&&s,f=r.reverse,l=void 0!==f&&f,h=r.voids,d=void 0!==h&&h,(p=r.match)||(p=function(){return!0}),o){e.next=6;break}return e.abrupt("return");case 6:Dt.isSpan(o)?(y=o[0],g=o[1]):(m=jt.path(t,o,{edge:"start"}),b=jt.path(t,o,{edge:"end"}),y=l?b:m,g=l?m:b),w=Nt.nodes(t,{reverse:l,from:y,to:g,pass:function(e){var r=u(e,1)[0];return!d&&jt.isVoid(t,r)}}),x=[],k=!0,P=!1,E=void 0,e.prev=12,F=w[Symbol.iterator]();case 14:if(k=(j=F.next()).done){e.next=40;break}if(A=u(j.value,2),S=A[0],D=A[1],N=O&&0===Rt.compare(D,O[1]),"highest"!==a||!N){e.next=19;break}return e.abrupt("continue",37);case 19:if(p(S)){e.next=25;break}if(!c||N||!Ut.isText(S)){e.next=24;break}return e.abrupt("return");case 24:return e.abrupt("continue",37);case 25:if("lowest"!==a||!N){e.next=28;break}return O=[S,D],e.abrupt("continue",37);case 28:if(!(_="lowest"===a?O:[S,D])){e.next=36;break}if(!c){e.next=34;break}x.push(_),e.next=36;break;case 34:return e.next=36,_;case 36:O=[S,D];case 37:k=!0,e.next=14;break;case 40:e.next=46;break;case 42:e.prev=42,e.t0=e.catch(12),P=!0,E=e.t0;case 46:e.prev=46,e.prev=47,k||null==F.return||F.return();case 49:if(e.prev=49,!P){e.next=52;break}throw E;case 52:return e.finish(49);case 53:return e.finish(46);case 54:if("lowest"!==a||!O){e.next=61;break}if(!c){e.next=59;break}x.push(O),e.next=61;break;case 59:return e.next=61,O;case 61:if(!c){e.next=63;break}return e.delegateYield(x,"t1",63);case 63:case"end":return e.stop()}}),e,null,[[12,42,46,54],[47,,49,53]])})),normalize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.force,n=void 0!==r&&r,o=function(e){return ct.get(e)||[]};if(jt.isNormalizing(e)){if(n){var i=Array.from(Nt.nodes(e),(function(e){return u(e,2)[1]}));ct.set(e,i)}0!==o(e).length&&jt.withoutNormalizing(e,(function(){for(var t=42*o(e).length,r=0;0!==o(e).length;){if(r>t)throw new Error("\n            Could not completely normalize the editor after ".concat(t," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state.\n          "));var n=o(e).pop(),i=jt.node(e,n);e.normalizeNode(i),r++}}))}},parent:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=jt.path(e,t,r),o=Rt.parent(n),i=jt.node(e,o);return i},path:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.depth,o=r.edge;if(Rt.isPath(t))if("start"===o){var i=Nt.first(e,t),a=u(i,2),s=a[1];t=s}else if("end"===o){var c=Nt.last(e,t),f=u(c,2),l=f[1];t=l}return Wt.isRange(t)&&(t="start"===o?Wt.start(t):"end"===o?Wt.end(t):Rt.common(t.anchor.path,t.focus.path)),It.isPoint(t)&&(t=t.path),null!=n&&(t=t.slice(0,n)),t},pathRef:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.affinity,o=void 0===n?"forward":n,i={current:t,affinity:o,unref:function(){var t=i.current;return jt.pathRefs(e).delete(i),i.current=null,t}},a=jt.pathRefs(e);return a.add(i),i},pathRefs:function(e){var t=ht.get(e);return t||(t=new Set,ht.set(e,t)),t},point:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.edge,o=void 0===n?"start":n;if(Rt.isPath(t)){var i;if("end"===o){var a=Nt.last(e,t),s=u(a,2),c=s[1];i=c}else{var f=Nt.first(e,t),l=u(f,2),h=l[1];i=h}var d=Nt.get(e,i);if(!Ut.isText(d))throw new Error("Cannot get the ".concat(o," point in the node at path [").concat(t,"] because it has no ").concat(o," text node."));return{path:i,offset:"end"===o?d.text.length:0}}if(Wt.isRange(t)){var v=Wt.edges(t),p=u(v,2),y=p[0],g=p[1];return"start"===o?y:g}return t},pointRef:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.affinity,o=void 0===n?"forward":n,i={current:t,affinity:o,unref:function(){var t=i.current;return jt.pointRefs(e).delete(i),i.current=null,t}},a=jt.pointRefs(e);return a.add(i),i},pointRefs:function(e){var t=dt.get(e);return t||(t=new Set,dt.set(e,t)),t},positions:v.mark((function e(t){var r,n,o,i,a,s,c,f,l,h,d,p,y,g,m,b,w,x,O,k,P,E,F,j,A,S,D,N,_,T,C,R=arguments;return v.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=R.length>1&&void 0!==R[1]?R[1]:{},n=r.at,o=void 0===n?t.selection:n,i=r.unit,a=void 0===i?"offset":i,s=r.reverse,c=void 0!==s&&s,o){e.next=4;break}return e.abrupt("return");case 4:f=jt.range(t,o),l=Wt.edges(f),h=u(l,2),d=h[0],p=h[1],y=c?p:d,g="",m=0,b=0,w=null,x=!1,O=function(){null==w&&(w="character"===a?mt(g):"word"===a?bt(g):"line"===a||"block"===a?g.length:1,g=g.slice(w)),b=c?b-w:b+w,w=(m-=w)>=0?null:0-m},k=!0,P=!1,E=void 0,e.prev=16,F=jt.nodes(t,{at:o,reverse:c})[Symbol.iterator]();case 18:if(k=(j=F.next()).done){e.next=54;break}if(A=u(j.value,2),S=A[0],D=A[1],!At.isElement(S)){e.next=28;break}if(!t.isVoid(S)){e.next=25;break}return e.next=24,jt.start(t,D);case 24:return e.abrupt("continue",51);case 25:if(!t.isInline(S)){e.next=27;break}return e.abrupt("continue",51);case 27:jt.hasInlines(t,S)&&(N=Rt.isAncestor(D,p.path)?p:jt.end(t,D),_=Rt.isAncestor(D,d.path)?d:jt.start(t,D),T=jt.string(t,{anchor:_,focus:N}),g=c?ut(T):T,x=!0);case 28:if(!Ut.isText(S)){e.next=51;break}if(C=Rt.equals(D,y.path),m=S.text.length,b=c?m:0,C&&(m=c?y.offset:m-y.offset,b=y.offset),!C&&!x&&"offset"!==a){e.next=36;break}return e.next=36,{path:D,offset:b};case 36:if(""!==g){e.next=41;break}return e.abrupt("break",50);case 41:O();case 42:if(!(m>=0)){e.next=47;break}return e.next=45,{path:D,offset:b};case 45:e.next=48;break;case 47:return e.abrupt("break",50);case 48:e.next=36;break;case 50:x=!1;case 51:k=!0,e.next=18;break;case 54:e.next=60;break;case 56:e.prev=56,e.t0=e.catch(16),P=!0,E=e.t0;case 60:e.prev=60,e.prev=61,k||null==F.return||F.return();case 63:if(e.prev=63,!P){e.next=66;break}throw E;case 66:return e.finish(63);case 67:return e.finish(60);case 68:case"end":return e.stop()}}),e,null,[[16,56,60,68],[61,,63,67]])})),previous:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.mode,n=void 0===r?"lowest":r,o=t.voids,i=void 0!==o&&o,a=t.match,s=t.at,c=void 0===s?e.selection:s;if(c){var f=jt.first(e,c),l=u(f,2),h=l[1],d=jt.first(e,[]),v=u(d,2),p=v[1],y=[h,p];if(Rt.isPath(c)&&0===c.length)throw new Error("Cannot get the previous node from the root node!");if(null==a)if(Rt.isPath(c)){var g=jt.parent(e,c),m=u(g,1),b=m[0];a=function(e){return b.children.includes(e)}}else a=function(){return!0};var w=jt.nodes(e,{reverse:!0,at:y,match:a,mode:n,voids:i}),x=u(w,2),O=x[1];return O}},range:function(e,t,r){return Wt.isRange(t)&&!r?t:{anchor:jt.start(e,t),focus:jt.end(e,r||t)}},rangeRef:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.affinity,o=void 0===n?"forward":n,i={current:t,affinity:o,unref:function(){var t=i.current;return jt.rangeRefs(e).delete(i),i.current=null,t}},a=jt.rangeRefs(e);return a.add(i),i},rangeRefs:function(e){var t=vt.get(e);return t||(t=new Set,vt.set(e,t)),t},removeMark:function(e,t){e.removeMark(t)},start:function(e,t){return jt.point(e,t,{edge:"start"})},string:function(e,t){var r=jt.range(e,t),n=Wt.edges(r),o=u(n,2),i=o[0],a=o[1],s="",c=!0,f=!1,l=void 0;try{for(var h,d=jt.nodes(e,{at:r,match:Ut.isText})[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var v=u(h.value,2),p=v[0],y=v[1],g=p.text;Rt.equals(y,a.path)&&(g=g.slice(0,a.offset)),Rt.equals(y,i.path)&&(g=g.slice(i.offset)),s+=g}}catch(e){f=!0,l=e}finally{try{c||null==d.return||d.return()}finally{if(f)throw l}}return s},transform:function(e,t){e.children=at(e.children);var r=e.selection&&at(e.selection);switch(t.type){case"insert_node":var n=t.path,i=t.node,a=Nt.parent(e,n),s=n[n.length-1];if(a.children.splice(s,0,i),r){var c=!0,f=!1,l=void 0;try{for(var h,d=Wt.points(r)[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var v=u(h.value,2),p=v[0];r[v[1]]=It.transform(p,t)}}catch(e){f=!0,l=e}finally{try{c||null==d.return||d.return()}finally{if(f)throw l}}}break;case"insert_text":var y=t.path,g=t.offset,m=t.text,b=Nt.leaf(e,y),w=b.text.slice(0,g),x=b.text.slice(g);if(b.text=w+m+x,r){var O=!0,k=!1,P=void 0;try{for(var E,F=Wt.points(r)[Symbol.iterator]();!(O=(E=F.next()).done);O=!0){var j=u(E.value,2),A=j[0];r[j[1]]=It.transform(A,t)}}catch(e){k=!0,P=e}finally{try{O||null==F.return||F.return()}finally{if(k)throw P}}}break;case"merge_node":var S=t.path,D=Nt.get(e,S),N=Rt.previous(S),_=Nt.get(e,N),T=Nt.parent(e,S),C=S[S.length-1];if(Ut.isText(D)&&Ut.isText(_))_.text+=D.text;else{if(Ut.isText(D)||Ut.isText(_))throw new Error('Cannot apply a "merge_node" operation at path ['.concat(S,"] to nodes of different interaces: ").concat(D," ").concat(_));var R;(R=_.children).push.apply(R,o(D.children))}if(T.children.splice(C,1),r){var B=!0,z=!1,q=void 0;try{for(var I,L=Wt.points(r)[Symbol.iterator]();!(B=(I=L.next()).done);B=!0){var M=u(I.value,2),W=M[0];r[M[1]]=It.transform(W,t)}}catch(e){z=!0,q=e}finally{try{B||null==L.return||L.return()}finally{if(z)throw q}}}break;case"move_node":var V=t.path,J=t.newPath;if(Rt.isAncestor(V,J))throw new Error("Cannot move a path [".concat(V,"] to new path [").concat(J,"] because the destination is inside itself."));var G=Nt.get(e,V),K=Nt.parent(e,V),Y=V[V.length-1];K.children.splice(Y,1);var $=Rt.transform(V,t),Z=Nt.get(e,Rt.parent($)),H=$[$.length-1];if(Z.children.splice(H,0,G),r){var Q=!0,X=!1,ee=void 0;try{for(var te,re=Wt.points(r)[Symbol.iterator]();!(Q=(te=re.next()).done);Q=!0){var ne=u(te.value,2),oe=ne[0];r[ne[1]]=It.transform(oe,t)}}catch(e){X=!0,ee=e}finally{try{Q||null==re.return||re.return()}finally{if(X)throw ee}}}break;case"remove_node":var ie=t.path,ae=ie[ie.length-1];if(Nt.parent(e,ie).children.splice(ae,1),r){var se=!0,ue=!1,ce=void 0;try{for(var fe,le=Wt.points(r)[Symbol.iterator]();!(se=(fe=le.next()).done);se=!0){var he=u(fe.value,2),de=he[0],ve=he[1],pe=It.transform(de,t);if(null!=r&&null!=pe)r[ve]=pe;else{var ye=void 0,ge=void 0,me=!0,be=!1,we=void 0;try{for(var xe,Oe=Nt.texts(e)[Symbol.iterator]();!(me=(xe=Oe.next()).done);me=!0){var ke=u(xe.value,2),Pe=ke[0],Ee=ke[1];if(-1!==Rt.compare(Ee,ie)){ge=[Pe,Ee];break}ye=[Pe,Ee]}}catch(e){be=!0,we=e}finally{try{me||null==Oe.return||Oe.return()}finally{if(be)throw we}}ye?(de.path=ye[1],de.offset=ye[0].text.length):ge?(de.path=ge[1],de.offset=0):r=null}}}catch(e){ue=!0,ce=e}finally{try{se||null==le.return||le.return()}finally{if(ue)throw ce}}}break;case"remove_text":var Fe=t.path,je=t.offset,Ae=t.text,Se=Nt.leaf(e,Fe),De=Se.text.slice(0,je),Ne=Se.text.slice(je+Ae.length);if(Se.text=De+Ne,r){var _e=!0,Te=!1,Ce=void 0;try{for(var Re,Be=Wt.points(r)[Symbol.iterator]();!(_e=(Re=Be.next()).done);_e=!0){var ze=u(Re.value,2),qe=ze[0];r[ze[1]]=It.transform(qe,t)}}catch(e){Te=!0,Ce=e}finally{try{_e||null==Be.return||Be.return()}finally{if(Te)throw Ce}}}break;case"set_node":var Ie=t.path,Le=t.newProperties;if(0===Ie.length)throw new Error("Cannot set properties on the root node!");var Me=Nt.get(e,Ie);for(var We in Le){if("children"===We||"text"===We)throw new Error('Cannot set the "'.concat(We,'" property of nodes!'));var Ve=Le[We];null==Ve?delete Me[We]:Me[We]=Ve}break;case"set_selection":var Je=t.newProperties;if(null==Je)r=Je;else if(null==r){if(!Wt.isRange(Je))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(JSON.stringify(Je)," when there is no current selection."));r=Je}else Object.assign(r,Je);break;case"split_node":var Ge=t.path,Ue=t.position,Ke=t.properties;if(0===Ge.length)throw new Error('Cannot apply a "split_node" operation at path ['.concat(Ge,"] because the root node cannot be split."));var Ye,$e=Nt.get(e,Ge),Ze=Nt.parent(e,Ge),He=Ge[Ge.length-1];if(Ut.isText($e)){var Qe=$e.text.slice(0,Ue),Xe=$e.text.slice(Ue);$e.text=Qe,Ye=Ft({},$e,{},Ke,{text:Xe})}else{var et=$e.children.slice(0,Ue),tt=$e.children.slice(Ue);$e.children=et,Ye=Ft({},$e,{},Ke,{children:tt})}if(Ze.children.splice(He+1,0,Ye),r){var rt=!0,nt=!1,ot=void 0;try{for(var it,ut=Wt.points(r)[Symbol.iterator]();!(rt=(it=ut.next()).done);rt=!0){var ct=u(it.value,2),ft=ct[0];r[ct[1]]=It.transform(ft,t)}}catch(e){nt=!0,ot=e}finally{try{rt||null==ut.return||ut.return()}finally{if(nt)throw ot}}}}e.children=st(e.children),e.selection=r?U(r)?st(r):r:null},unhangRange:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.voids,o=void 0!==n&&n,i=Wt.edges(t),a=u(i,2),s=a[0],c=a[1];if(0!==s.offset||0!==c.offset||Wt.isCollapsed(t))return t;var f=jt.above(e,{at:c,match:function(t){return jt.isBlock(e,t)}}),l=f?f[1]:[],h=jt.start(e,[]),d={anchor:h,focus:c},v=!0,p=!0,y=!1,g=void 0;try{for(var m,b=jt.nodes(e,{at:d,match:Ut.isText,reverse:!0,voids:o})[Symbol.iterator]();!(p=(m=b.next()).done);p=!0){var w=u(m.value,2),x=w[0],O=w[1];if(v)v=!1;else if(""!==x.text||Rt.isBefore(O,l)){c={path:O,offset:x.text.length};break}}}catch(e){y=!0,g=e}finally{try{p||null==b.return||b.return()}finally{if(y)throw g}}return{anchor:s,focus:c}},void:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return jt.above(e,Ft({},t,{match:function(t){return jt.isVoid(e,t)}}))},withoutNormalizing:function(e,t){var r=jt.isNormalizing(e);lt.set(e,!1),t(),lt.set(e,r),jt.normalize(e)}},At={isElement:function(e){return y(e)&&Nt.isNodeList(e.children)&&!jt.isEditor(e)},isElementList:function(e){return Array.isArray(e)&&(0===e.length||At.isElement(e[0]))},matches:function(e,t){for(var r in t)if("children"!==r&&e[r]!==t[r])return!1;return!0}},St={isLocation:function(e){return Rt.isPath(e)||It.isPoint(e)||Wt.isRange(e)}},Dt={isSpan:function(e){return Array.isArray(e)&&2===e.length&&e.every(Rt.isPath)}},Nt={ancestor:function(e,t){var r=Nt.get(e,t);if(Ut.isText(r))throw new Error("Cannot get the ancestor node at path [".concat(t,"] because it refers to a text node instead: ").concat(r));return r},ancestors:v.mark((function e(t,r){var n,o,i,a,s,u,c,f,l,h=arguments;return v.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=h.length>2&&void 0!==h[2]?h[2]:{},o=!0,i=!1,a=void 0,e.prev=4,s=Rt.ancestors(r,n)[Symbol.iterator]();case 6:if(o=(u=s.next()).done){e.next=15;break}return c=u.value,f=Nt.ancestor(t,c),l=[f,c],e.next=12,l;case 12:o=!0,e.next=6;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),i=!0,a=e.t0;case 21:e.prev=21,e.prev=22,o||null==s.return||s.return();case 24:if(e.prev=24,!i){e.next=27;break}throw a;case 27:return e.finish(24);case 28:return e.finish(21);case 29:case"end":return e.stop()}}),e,null,[[4,17,21,29],[22,,24,28]])})),child:function(e,t){if(Ut.isText(e))throw new Error("Cannot get the child of a text node: ".concat(JSON.stringify(e)));var r=e.children[t];if(null==r)throw new Error("Cannot get child at index `".concat(t,"` in node: ").concat(JSON.stringify(e)));return r},children:v.mark((function(e,t){var r,n,o,i,a,s,u,c,f=arguments;return v.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:r=f.length>2&&void 0!==f[2]?f[2]:{},n=r.reverse,o=void 0!==n&&n,i=Nt.ancestor(e,t),a=i.children,s=o?a.length-1:0;case 5:if(!(o?s>=0:s<a.length)){l.next=13;break}return u=Nt.child(i,s),c=t.concat(s),l.next=10,[u,c];case 10:s=o?s-1:s+1,l.next=5;break;case 13:case"end":return l.stop()}}),a)})),common:function(e,t,r){var n=Rt.common(t,r);return[Nt.get(e,n),n]},descendant:function(e,t){var r=Nt.get(e,t);if(jt.isEditor(r))throw new Error("Cannot get the descendant node at path [".concat(t,"] because it refers to the root editor node instead: ").concat(r));return r},descendants:v.mark((function e(t){var r,n,o,i,a,s,c,f,l,h=arguments;return v.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=h.length>1&&void 0!==h[1]?h[1]:{},n=!0,o=!1,i=void 0,e.prev=4,a=Nt.nodes(t,r)[Symbol.iterator]();case 6:if(n=(s=a.next()).done){e.next=14;break}if(c=u(s.value,2),f=c[0],0===(l=c[1]).length){e.next=11;break}return e.next=11,[f,l];case 11:n=!0,e.next=6;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(4),o=!0,i=e.t0;case 20:e.prev=20,e.prev=21,n||null==a.return||a.return();case 23:if(e.prev=23,!o){e.next=26;break}throw i;case 26:return e.finish(23);case 27:return e.finish(20);case 28:case"end":return e.stop()}}),e,null,[[4,16,20,28],[21,,23,27]])})),elements:v.mark((function e(t){var r,n,o,i,a,s,c,f,l,h=arguments;return v.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=h.length>1&&void 0!==h[1]?h[1]:{},n=!0,o=!1,i=void 0,e.prev=4,a=Nt.nodes(t,r)[Symbol.iterator]();case 6:if(n=(s=a.next()).done){e.next=14;break}if(c=u(s.value,2),f=c[0],l=c[1],!At.isElement(f)){e.next=11;break}return e.next=11,[f,l];case 11:n=!0,e.next=6;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(4),o=!0,i=e.t0;case 20:e.prev=20,e.prev=21,n||null==a.return||a.return();case 23:if(e.prev=23,!o){e.next=26;break}throw i;case 26:return e.finish(23);case 27:return e.finish(20);case 28:case"end":return e.stop()}}),e,null,[[4,16,20,28],[21,,23,27]])})),first:function(e,t){for(var r=t.slice(),n=Nt.get(e,r);n&&!Ut.isText(n)&&0!==n.children.length;)n=n.children[0],r.push(0);return[n,r]},fragment:function(e,t){if(Ut.isText(e))throw new Error("Cannot get a fragment starting from a root text node: ".concat(JSON.stringify(e)));return it(e,(function(e){var r=Wt.edges(t),n=u(r,2),o=n[0],i=n[1],a=Nt.nodes(e,{reverse:!0,pass:function(e){var r=u(e,2)[1];return!Wt.includes(t,r)}}),s=!0,c=!1,f=void 0;try{for(var l,h=a[Symbol.iterator]();!(s=(l=h.next()).done);s=!0){var d=u(l.value,2)[1];if(!Wt.includes(t,d)){var v=Nt.parent(e,d),p=d[d.length-1];v.children.splice(p,1)}if(Rt.equals(d,i.path)){var y=Nt.leaf(e,d);y.text=y.text.slice(0,i.offset)}if(Rt.equals(d,o.path)){var g=Nt.leaf(e,d);g.text=g.text.slice(o.offset)}}}catch(e){c=!0,f=e}finally{try{s||null==h.return||h.return()}finally{if(c)throw f}}delete e.selection})).children},get:function(e,t){for(var r=e,n=0;n<t.length;n++){var o=t[n];if(Ut.isText(r)||!r.children[o])throw new Error("Cannot find a descendant at path [".concat(t,"] in node: ").concat(JSON.stringify(e)));r=r.children[o]}return r},has:function(e,t){for(var r=e,n=0;n<t.length;n++){var o=t[n];if(Ut.isText(r)||!r.children[o])return!1;r=r.children[o]}return!0},isNode:function(e){return Ut.isText(e)||At.isElement(e)||jt.isEditor(e)},isNodeList:function(e){return Array.isArray(e)&&(0===e.length||Nt.isNode(e[0]))},last:function(e,t){for(var r=t.slice(),n=Nt.get(e,r);n&&!Ut.isText(n)&&0!==n.children.length;){var o=n.children.length-1;n=n.children[o],r.push(o)}return[n,r]},leaf:function(e,t){var r=Nt.get(e,t);if(!Ut.isText(r))throw new Error("Cannot get the leaf node at path [".concat(t,"] because it refers to a non-leaf node: ").concat(r));return r},levels:v.mark((function e(t,r){var n,o,i,a,s,u,c,f,l=arguments;return v.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=l.length>2&&void 0!==l[2]?l[2]:{},o=!0,i=!1,a=void 0,e.prev=4,s=Rt.levels(r,n)[Symbol.iterator]();case 6:if(o=(u=s.next()).done){e.next=14;break}return c=u.value,f=Nt.get(t,c),e.next=11,[f,c];case 11:o=!0,e.next=6;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(4),i=!0,a=e.t0;case 20:e.prev=20,e.prev=21,o||null==s.return||s.return();case 23:if(e.prev=23,!i){e.next=26;break}throw a;case 26:return e.finish(23);case 27:return e.finish(20);case 28:case"end":return e.stop()}}),e,null,[[4,16,20,28],[21,,23,27]])})),matches:function(e,t){return At.isElement(e)&&At.matches(e,t)||Ut.isText(e)&&Ut.matches(e,t)},nodes:v.mark((function e(t){var r,n,o,i,a,s,u,c,f,l,h,d,p,y=arguments;return v.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=y.length>1&&void 0!==y[1]?y[1]:{},n=r.pass,o=r.reverse,i=void 0!==o&&o,a=r.from,s=void 0===a?[]:a,u=r.to,c=new Set,f=[],l=t;case 6:if(!(u&&(i?Rt.isBefore(f,u):Rt.isAfter(f,u)))){e.next=9;break}return e.abrupt("break",37);case 9:if(c.has(l)){e.next=12;break}return e.next=12,[l,f];case 12:if(c.has(l)||Ut.isText(l)||0===l.children.length||null!=n&&!1!==n([l,f])){e.next=19;break}return c.add(l),h=i?l.children.length-1:0,Rt.isAncestor(f,s)&&(h=s[f.length]),f=f.concat(h),l=Nt.get(t,f),e.abrupt("continue",6);case 19:if(0!==f.length){e.next=21;break}return e.abrupt("break",37);case 21:if(i){e.next=27;break}if(d=Rt.next(f),!Nt.has(t,d)){e.next=27;break}return f=d,l=Nt.get(t,f),e.abrupt("continue",6);case 27:if(!i||0===f[f.length-1]){e.next=32;break}return p=Rt.previous(f),f=p,l=Nt.get(t,f),e.abrupt("continue",6);case 32:f=Rt.parent(f),l=Nt.get(t,f),c.add(l),e.next=6;break;case 37:case"end":return e.stop()}}),e)})),parent:function(e,t){var r=Rt.parent(t),n=Nt.get(e,r);if(Ut.isText(n))throw new Error("Cannot get the parent of path [".concat(t,"] because it does not exist in the root."));return n},string:function(e){return Ut.isText(e)?e.text:e.children.map(Nt.string).join("")},texts:v.mark((function e(t){var r,n,o,i,a,s,c,f,l,h=arguments;return v.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=h.length>1&&void 0!==h[1]?h[1]:{},n=!0,o=!1,i=void 0,e.prev=4,a=Nt.nodes(t,r)[Symbol.iterator]();case 6:if(n=(s=a.next()).done){e.next=14;break}if(c=u(s.value,2),f=c[0],l=c[1],!Ut.isText(f)){e.next=11;break}return e.next=11,[f,l];case 11:n=!0,e.next=6;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(4),o=!0,i=e.t0;case 20:e.prev=20,e.prev=21,n||null==a.return||a.return();case 23:if(e.prev=23,!o){e.next=26;break}throw i;case 26:return e.finish(23);case 27:return e.finish(20);case 28:case"end":return e.stop()}}),e,null,[[4,16,20,28],[21,,23,27]])}))};function _t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Tt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ct={isNodeOperation:function(e){return Ct.isOperation(e)&&e.type.endsWith("_node")},isOperation:function(e){if(!y(e))return!1;switch(e.type){case"insert_node":return Rt.isPath(e.path)&&Nt.isNode(e.node);case"insert_text":return"number"==typeof e.offset&&"string"==typeof e.text&&Rt.isPath(e.path);case"merge_node":return"number"==typeof e.position&&Rt.isPath(e.path)&&y(e.properties);case"move_node":return Rt.isPath(e.path)&&Rt.isPath(e.newPath);case"remove_node":return Rt.isPath(e.path)&&Nt.isNode(e.node);case"remove_text":return"number"==typeof e.offset&&"string"==typeof e.text&&Rt.isPath(e.path);case"set_node":return Rt.isPath(e.path)&&y(e.properties)&&y(e.newProperties);case"set_selection":return null===e.properties&&Wt.isRange(e.newProperties)||null===e.newProperties&&Wt.isRange(e.properties)||y(e.properties)&&y(e.newProperties);case"split_node":return Rt.isPath(e.path)&&"number"==typeof e.position&&y(e.properties);default:return!1}},isOperationList:function(e){return Array.isArray(e)&&(0===e.length||Ct.isOperation(e[0]))},isSelectionOperation:function(e){return Ct.isOperation(e)&&e.type.endsWith("_selection")},isTextOperation:function(e){return Ct.isOperation(e)&&e.type.endsWith("_text")},inverse:function(e){switch(e.type){case"insert_node":return Tt({},e,{type:"remove_node"});case"insert_text":return Tt({},e,{type:"remove_text"});case"merge_node":return Tt({},e,{type:"split_node",path:Rt.previous(e.path)});case"move_node":var t=e.newPath,r=e.path;return Rt.equals(t,r)?e:Rt.isSibling(r,t)?Tt({},e,{path:t,newPath:r}):Tt({},e,{path:Rt.transform(r,e),newPath:Rt.transform(Rt.next(r),e)});case"remove_node":return Tt({},e,{type:"insert_node"});case"remove_text":return Tt({},e,{type:"insert_text"});case"set_node":var n=e.properties;return Tt({},e,{properties:e.newProperties,newProperties:n});case"set_selection":var o=e.properties,i=e.newProperties;return Tt({},e,null==o?{properties:i,newProperties:null}:null==i?{properties:null,newProperties:o}:{properties:i,newProperties:o});case"split_node":return Tt({},e,{type:"merge_node",path:Rt.next(e.path)})}}},Rt={ancestors:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.reverse,n=void 0!==r&&r,o=Rt.levels(e,t);return o=n?o.slice(1):o.slice(0,-1)},common:function(e,t){for(var r=[],n=0;n<e.length&&n<t.length;n++){var o=e[n];if(o!==t[n])break;r.push(o)}return r},compare:function(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;n++){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return 0},endsAfter:function(e,t){var r=e.length-1,n=e.slice(0,r),o=t.slice(0,r),i=e[r],a=t[r];return Rt.equals(n,o)&&i>a},endsAt:function(e,t){var r=e.length,n=e.slice(0,r),o=t.slice(0,r);return Rt.equals(n,o)},endsBefore:function(e,t){var r=e.length-1,n=e.slice(0,r),o=t.slice(0,r),i=e[r],a=t[r];return Rt.equals(n,o)&&i<a},equals:function(e,t){return e.length===t.length&&e.every((function(e,r){return e===t[r]}))},isAfter:function(e,t){return 1===Rt.compare(e,t)},isAncestor:function(e,t){return e.length<t.length&&0===Rt.compare(e,t)},isBefore:function(e,t){return-1===Rt.compare(e,t)},isChild:function(e,t){return e.length===t.length+1&&0===Rt.compare(e,t)},isCommon:function(e,t){return e.length<=t.length&&0===Rt.compare(e,t)},isDescendant:function(e,t){return e.length>t.length&&0===Rt.compare(e,t)},isParent:function(e,t){return e.length+1===t.length&&0===Rt.compare(e,t)},isPath:function(e){return Array.isArray(e)&&(0===e.length||"number"==typeof e[0])},isSibling:function(e,t){if(e.length!==t.length)return!1;var r=e.slice(0,-1),n=t.slice(0,-1);return e[e.length-1]!==t[t.length-1]&&Rt.equals(r,n)},levels:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.reverse,n=void 0!==r&&r,o=[],i=0;i<=e.length;i++)o.push(e.slice(0,i));return n&&o.reverse(),o},next:function(e){if(0===e.length)throw new Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var t=e[e.length-1];return e.slice(0,-1).concat(t+1)},parent:function(e){if(0===e.length)throw new Error("Cannot get the parent path of the root path [".concat(e,"]."));return e.slice(0,-1)},previous:function(e){if(0===e.length)throw new Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var t=e[e.length-1];if(t<=0)throw new Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return e.slice(0,-1).concat(t-1)},relative:function(e,t){if(!Rt.isAncestor(t,e)&&!Rt.equals(e,t))throw new Error("Cannot get the relative path of [".concat(e,"] inside ancestor [").concat(t,"], because it is not above or equal to the path."));return e.slice(t.length)},transform:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return it(e,(function(n){var o=r.affinity,i=void 0===o?"forward":o;if(0!==e.length)switch(t.type){case"insert_node":var a=t.path;(Rt.equals(a,n)||Rt.endsBefore(a,n)||Rt.isAncestor(a,n))&&(n[a.length-1]+=1);break;case"remove_node":var s=t.path;if(Rt.equals(s,n)||Rt.isAncestor(s,n))return null;Rt.endsBefore(s,n)&&(n[s.length-1]-=1);break;case"merge_node":var u=t.path,c=t.position;Rt.equals(u,n)||Rt.endsBefore(u,n)?n[u.length-1]-=1:Rt.isAncestor(u,n)&&(n[u.length-1]-=1,n[u.length]+=c);break;case"split_node":var f=t.path,l=t.position;if(Rt.equals(f,n)){if("forward"===i)n[n.length-1]+=1;else if("backward"!==i)return null}else Rt.endsBefore(f,n)?n[f.length-1]+=1:Rt.isAncestor(f,n)&&e[f.length]>=l&&(n[f.length-1]+=1,n[f.length]-=l);break;case"move_node":var h=t.path,d=t.newPath;if(Rt.equals(h,d))return;if(Rt.isAncestor(h,n)||Rt.equals(h,n)){var v=d.slice();return Rt.endsBefore(h,d)&&h.length<d.length&&(v[h.length-1]-=1),v.concat(n.slice(h.length))}Rt.isSibling(h,d)&&(Rt.isAncestor(d,n)||Rt.equals(d,n))?Rt.endsBefore(h,n)?n[h.length-1]-=1:n[h.length-1]+=1:Rt.endsBefore(d,n)||Rt.equals(d,n)||Rt.isAncestor(d,n)?(Rt.endsBefore(h,n)&&(n[h.length-1]-=1),n[d.length-1]+=1):Rt.endsBefore(h,n)&&(Rt.equals(d,n)&&(n[d.length-1]+=1),n[h.length-1]-=1)}}))}},Bt={transform:function(e,t){var r=e.current,n=e.affinity;if(null!=r){var o=Rt.transform(r,t,{affinity:n});e.current=o,null==o&&e.unref()}}};function zt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zt(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var It={compare:function(e,t){var r=Rt.compare(e.path,t.path);return 0===r?e.offset<t.offset?-1:e.offset>t.offset?1:0:r},isAfter:function(e,t){return 1===It.compare(e,t)},isBefore:function(e,t){return-1===It.compare(e,t)},equals:function(e,t){return e.offset===t.offset&&Rt.equals(e.path,t.path)},isPoint:function(e){return y(e)&&"number"==typeof e.offset&&Rt.isPath(e.path)},transform:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return it(e,(function(e){var n=r.affinity,o=void 0===n?"forward":n,i=e.path,a=e.offset;switch(t.type){case"insert_node":case"move_node":e.path=Rt.transform(i,t,r);break;case"insert_text":Rt.equals(t.path,i)&&t.offset<=a&&(e.offset+=t.text.length);break;case"merge_node":Rt.equals(t.path,i)&&(e.offset+=t.position),e.path=Rt.transform(i,t,r);break;case"remove_text":Rt.equals(t.path,i)&&t.offset<=a&&(e.offset-=Math.min(a-t.offset,t.text.length));break;case"remove_node":if(Rt.equals(t.path,i)||Rt.isAncestor(t.path,i))return null;e.path=Rt.transform(i,t,r);break;case"split_node":if(Rt.equals(t.path,i)){if(t.position===a&&null==o)return null;(t.position<a||t.position===a&&"forward"===o)&&(e.offset-=t.position,e.path=Rt.transform(i,t,qt({},r,{affinity:"forward"})))}else e.path=Rt.transform(i,t,r)}}))}},Lt={transform:function(e,t){var r=e.current,n=e.affinity;if(null!=r){var o=It.transform(r,t,{affinity:n});e.current=o,null==o&&e.unref()}}};function Mt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Wt={edges:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.reverse,n=void 0!==r&&r,o=e.anchor,i=e.focus;return Wt.isBackward(e)===n?[o,i]:[i,o]},end:function(e){var t=Wt.edges(e),r=u(t,2)[1];return r},equals:function(e,t){return It.equals(e.anchor,t.anchor)&&It.equals(e.focus,t.focus)},includes:function(e,t){if(Wt.isRange(t)){if(Wt.includes(e,t.anchor)||Wt.includes(e,t.focus))return!0;var r=Wt.edges(e),n=u(r,2),o=n[0],i=n[1],a=Wt.edges(t),s=u(a,2),c=s[0],f=s[1];return It.isBefore(o,c)&&It.isAfter(i,f)}var l=Wt.edges(e),h=u(l,2),d=h[0],v=h[1],p=!1,y=!1;return It.isPoint(t)?(p=It.compare(t,d)>=0,y=It.compare(t,v)<=0):(p=Rt.compare(t,d.path)>=0,y=Rt.compare(t,v.path)<=0),p&&y},intersection:function(e,t){e.anchor,e.focus;var r=l(e,["anchor","focus"]),n=Wt.edges(e),o=u(n,2),i=o[0],a=o[1],s=Wt.edges(t),f=u(s,2),h=f[0],d=f[1],v=It.isBefore(i,h)?h:i,p=It.isBefore(a,d)?a:d;return It.isBefore(p,v)?null:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({anchor:v,focus:p},r)},isBackward:function(e){var t=e.anchor,r=e.focus;return It.isAfter(t,r)},isCollapsed:function(e){var t=e.anchor,r=e.focus;return It.equals(t,r)},isExpanded:function(e){return!Wt.isCollapsed(e)},isForward:function(e){return!Wt.isBackward(e)},isRange:function(e){return y(e)&&It.isPoint(e.anchor)&&It.isPoint(e.focus)},points:v.mark((function e(t){return v.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,[t.anchor,"anchor"];case 2:return e.next=4,[t.focus,"focus"];case 4:case"end":return e.stop()}}),e)})),start:function(e){var t=Wt.edges(e),r=u(t,1)[0];return r},transform:function(e,t,r){var n,o,i=r.affinity,a=void 0===i?"inward":i;return"inward"===a?Wt.isForward(e)?(n="forward",o="backward"):(n="backward",o="forward"):"outward"===a?Wt.isForward(e)?(n="backward",o="forward"):(n="forward",o="backward"):(n=a,o=a),it(e,(function(e){var r=It.transform(e.anchor,t,{affinity:n}),i=It.transform(e.focus,t,{affinity:o});if(!r||!i)return null;e.anchor=r,e.focus=i}))}},Vt={transform:function(e,t){var r=e.current,n=e.affinity;if(null!=r){var o=Wt.transform(r,t,{affinity:n});e.current=o,null==o&&e.unref()}}};function Jt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ut={equals:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.loose,o=void 0!==n&&n;for(var i in e)if((!o||"text"!==i)&&e[i]!==t[i])return!1;for(var a in t)if((!o||"text"!==a)&&e[a]!==t[a])return!1;return!0},isText:function(e){return y(e)&&"string"==typeof e.text},isTextList:function(e){return Array.isArray(e)&&(0===e.length||Ut.isText(e[0]))},matches:function(e,t){for(var r in t)if("text"!==r&&e[r]!==t[r])return!1;return!0},decorations:function(e,t){var r=[Gt({},e)],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var c=a.value,f=(c.anchor,c.focus,l(c,["anchor","focus"])),h=Wt.edges(c),d=u(h,2),v=d[0],p=d[1],y=[],g=0,m=!0,b=!1,w=void 0;try{for(var x,O=r[Symbol.iterator]();!(m=(x=O.next()).done);m=!0){var k=x.value,P=k.text.length,E=g;if(g+=P,v.offset<=E&&p.offset>=E+P)Object.assign(k,f),y.push(k);else if(v.offset>E+P||p.offset<E||p.offset===E&&0!==E)y.push(k);else{var F=k,j=void 0,A=void 0;if(p.offset<E+P){var S=p.offset-E;A=Gt({},F,{text:F.text.slice(S)}),F=Gt({},F,{text:F.text.slice(0,S)})}if(v.offset>E){var D=v.offset-E;j=Gt({},F,{text:F.text.slice(0,D)}),F=Gt({},F,{text:F.text.slice(D)})}Object.assign(F,f),j&&y.push(j),y.push(F),A&&y.push(A)}}}catch(e){b=!0,w=e}finally{try{m||null==O.return||O.return()}finally{if(b)throw w}}r=y}}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}};function Kt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Yt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kt(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Zt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$t(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ht={insertNodes:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};jt.withoutNormalizing(e,(function(){var n=r.hanging,o=void 0!==n&&n,i=r.voids,a=void 0!==i&&i,s=r.mode,c=void 0===s?"lowest":s,f=r.at,l=r.match,h=r.select;if(Nt.isNode(t)&&(t=[t]),0!==t.length){var d=u(t,1)[0];if(f||(f=e.selection?e.selection:e.children.length>0?jt.end(e,[]):[0],h=!0),null==h&&(h=!1),Wt.isRange(f))if(o||(f=jt.unhangRange(e,f)),Wt.isCollapsed(f))f=f.anchor;else{var v=Wt.edges(f),p=u(v,2)[1],y=jt.pointRef(e,p);rr.delete(e,{at:f}),f=y.unref()}if(It.isPoint(f)){null==l&&(l=Ut.isText(d)?function(e){return Ut.isText(e)}:e.isInline(d)?function(t){return Ut.isText(t)||jt.isInline(e,t)}:function(t){return jt.isBlock(e,t)});var g=jt.nodes(e,{at:f.path,match:l,mode:c,voids:a}),m=u(g,1)[0];if(!m)return;var b=u(m,2)[1],w=jt.pathRef(e,b),x=jt.isEnd(e,f,b);rr.splitNodes(e,{at:f,match:l,mode:c,voids:a});var O=w.unref();f=x?Rt.next(O):O}var k=Rt.parent(f),P=f[f.length-1];if(a||!jt.void(e,{at:k})){var E=!0,F=!1,j=void 0;try{for(var A,S=t[Symbol.iterator]();!(E=(A=S.next()).done);E=!0){var D=A.value,N=k.concat(P);P++,e.apply({type:"insert_node",path:N,node:D})}}catch(e){F=!0,j=e}finally{try{E||null==S.return||S.return()}finally{if(F)throw j}}if(h){var _=jt.end(e,f);_&&rr.select(e,_)}}}}))},liftNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};jt.withoutNormalizing(e,(function(){var r=t.at,n=void 0===r?e.selection:r,o=t.mode,i=void 0===o?"lowest":o,a=t.voids,s=void 0!==a&&a,c=t.match;if(null==c&&(c=Rt.isPath(n)?Xt(e,n):function(t){return jt.isBlock(e,t)}),n)for(var f=jt.nodes(e,{at:n,match:c,mode:i,voids:s}),l=0,h=Array.from(f,(function(t){var r=u(t,2)[1];return jt.pathRef(e,r)}));l<h.length;l++){var d=h[l].unref();if(d.length<2)throw new Error("Cannot lift node at a path [".concat(d,"] because it has a depth of less than `2`."));var v=jt.node(e,Rt.parent(d)),p=u(v,2),y=p[0],g=p[1],m=d[d.length-1],b=y.children.length;if(1===b){var w=Rt.next(g);rr.moveNodes(e,{at:d,to:w,voids:s}),rr.removeNodes(e,{at:g,voids:s})}else if(0===m)rr.moveNodes(e,{at:d,to:g,voids:s});else if(m===b-1){var x=Rt.next(g);rr.moveNodes(e,{at:d,to:x,voids:s})}else{var O=Rt.next(d),k=Rt.next(g);rr.splitNodes(e,{at:O,voids:s}),rr.moveNodes(e,{at:d,to:k,voids:s})}}}))},mergeNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};jt.withoutNormalizing(e,(function(){var r=t.match,n=t.at,o=void 0===n?e.selection:n,i=t.hanging,a=void 0!==i&&i,s=t.voids,c=void 0!==s&&s,f=t.mode,h=void 0===f?"lowest":f;if(o){if(null==r)if(Rt.isPath(o)){var d=jt.parent(e,o),v=u(d,1)[0];r=function(e){return v.children.includes(e)}}else r=function(t){return jt.isBlock(e,t)};if(!a&&Wt.isRange(o)&&(o=jt.unhangRange(e,o)),Wt.isRange(o))if(Wt.isCollapsed(o))o=o.anchor;else{var p=Wt.edges(o),y=u(p,2)[1],g=jt.pointRef(e,y);rr.delete(e,{at:o}),o=g.unref(),null==t.at&&rr.select(e,o)}var m=jt.nodes(e,{at:o,match:r,voids:c,mode:h}),b=u(m,1)[0],w=jt.previous(e,{at:o,match:r,voids:c,mode:h});if(b&&w){var x=u(b,2),O=x[0],k=x[1],P=u(w,2),E=P[0],F=P[1];if(0!==k.length&&0!==F.length){var j,A,S=Rt.next(F),D=Rt.common(k,F),N=Rt.isSibling(k,F),_=Array.from(jt.levels(e,{at:k}),(function(e){return u(e,1)[0]})).slice(D.length).slice(0,-1),T=jt.above(e,{at:k,mode:"highest",match:function(e){return _.includes(e)&&At.isElement(e)&&1===e.children.length}}),C=T&&jt.pathRef(e,T[1]);if(Ut.isText(O)&&Ut.isText(E)){O.text;var R=l(O,["text"]);A=E.text.length,j=R}else{if(!At.isElement(O)||!At.isElement(E))throw new Error("Cannot merge the node at path [".concat(k,"] with the previous sibling because it is not the same kind: ").concat(JSON.stringify(O)," ").concat(JSON.stringify(E)));O.children;var B=l(O,["children"]);A=E.children.length,j=B}N||rr.moveNodes(e,{at:k,to:S,voids:c}),C&&rr.removeNodes(e,{at:C.current,voids:c}),At.isElement(E)&&jt.isEmpty(e,E)||Ut.isText(E)&&""===E.text?rr.removeNodes(e,{at:F,voids:c}):e.apply({type:"merge_node",path:S,position:A,properties:j}),C&&C.unref()}}}}))},moveNodes:function(e,t){jt.withoutNormalizing(e,(function(){var r=t.to,n=t.at,o=void 0===n?e.selection:n,i=t.mode,a=void 0===i?"lowest":i,s=t.voids,c=void 0!==s&&s,f=t.match;if(o){null==f&&(f=Rt.isPath(o)?Xt(e,o):function(t){return jt.isBlock(e,t)});for(var l=jt.pathRef(e,r),h=jt.nodes(e,{at:o,match:f,mode:a,voids:c}),d=0,v=Array.from(h,(function(t){var r=u(t,2)[1];return jt.pathRef(e,r)}));d<v.length;d++){var p=v[d].unref(),y=l.current;0!==p.length&&e.apply({type:"move_node",path:p,newPath:y})}l.unref()}}))},removeNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};jt.withoutNormalizing(e,(function(){var r=t.hanging,n=void 0!==r&&r,o=t.voids,i=void 0!==o&&o,a=t.mode,s=void 0===a?"lowest":a,c=t.at,f=void 0===c?e.selection:c,l=t.match;if(f){null==l&&(l=Rt.isPath(f)?Xt(e,f):function(t){return jt.isBlock(e,t)}),!n&&Wt.isRange(f)&&(f=jt.unhangRange(e,f));for(var h=jt.nodes(e,{at:f,match:l,mode:s,voids:i}),d=0,v=Array.from(h,(function(t){var r=u(t,2)[1];return jt.pathRef(e,r)}));d<v.length;d++){var p=v[d].unref();if(p){var y=jt.node(e,p),g=u(y,1)[0];e.apply({type:"remove_node",path:p,node:g})}}}}))},setNodes:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};jt.withoutNormalizing(e,(function(){var n=r.match,o=r.at,i=void 0===o?e.selection:o,a=r.hanging,s=void 0!==a&&a,c=r.mode,f=void 0===c?"lowest":c,l=r.split,h=void 0!==l&&l,d=r.voids,v=void 0!==d&&d;if(i){if(null==n&&(n=Rt.isPath(i)?Xt(e,i):function(t){return jt.isBlock(e,t)}),!s&&Wt.isRange(i)&&(i=jt.unhangRange(e,i)),h&&Wt.isRange(i)){var p=jt.rangeRef(e,i,{affinity:"inward"}),y=Wt.edges(i),g=u(y,2),m=g[0],b=g[1],w="lowest"===f?"lowest":"highest";rr.splitNodes(e,{at:b,match:n,mode:w,voids:v}),rr.splitNodes(e,{at:m,match:n,mode:w,voids:v}),i=p.unref(),null==r.at&&rr.select(e,i)}var x=!0,O=!1,k=void 0;try{for(var P,E=jt.nodes(e,{at:i,match:n,mode:f,voids:v})[Symbol.iterator]();!(x=(P=E.next()).done);x=!0){var F=u(P.value,2),j=F[0],A=F[1],S={},D={};if(0!==A.length){for(var N in t)"children"!==N&&"text"!==N&&t[N]!==j[N]&&(S[N]=j[N],D[N]=t[N]);0!==Object.keys(D).length&&e.apply({type:"set_node",path:A,properties:S,newProperties:D})}}}catch(e){O=!0,k=e}finally{try{x||null==E.return||E.return()}finally{if(O)throw k}}}}))},splitNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};jt.withoutNormalizing(e,(function(){var r=t.mode,n=void 0===r?"lowest":r,o=t.voids,i=void 0!==o&&o,a=t.match,s=t.at,c=void 0===s?e.selection:s,f=t.height,h=void 0===f?0:f,d=t.always,v=void 0!==d&&d;if(null==a&&(a=function(t){return jt.isBlock(e,t)}),Wt.isRange(c)&&(c=Qt(e,c)),Rt.isPath(c)){var p=c,y=jt.point(e,p),g=jt.parent(e,p),m=u(g,1)[0];a=function(e){return e===m},h=y.path.length-p.length+1,c=y,v=!0}if(c){var b=jt.pointRef(e,c,{affinity:"backward"}),w=jt.nodes(e,{at:c,match:a,mode:n,voids:i}),x=u(w,1)[0];if(x){var O=jt.void(e,{at:c,mode:"highest"});if(!i&&O){var k=u(O,2),P=k[0],E=k[1];if(At.isElement(P)&&e.isInline(P)){var F=jt.after(e,E);if(!F){var j=Rt.next(E);rr.insertNodes(e,{text:""},{at:j,voids:i}),F=jt.point(e,j)}c=F,v=!0}h=c.path.length-E.length+1,v=!0}var A=jt.pointRef(e,c),S=c.path.length-h,D=u(x,2)[1],N=c.path.slice(0,S),_=0===h?c.offset:c.path[S]+0,T=!0,C=!1,R=void 0;try{for(var B,z=jt.levels(e,{at:N,reverse:!0,voids:i})[Symbol.iterator]();!(T=(B=z.next()).done);T=!0){var q=u(B.value,2),I=q[0],L=q[1],M=!1;if(L.length<D.length||0===L.length||!i&&jt.isVoid(e,I))break;var W=b.current,V=jt.isEnd(e,W,L);if(v||!b||!jt.isEdge(e,W,L)){M=!0;I.text,I.children;var J=l(I,["text","children"]);e.apply({type:"split_node",path:L,position:_,properties:J})}_=L[L.length-1]+(M||V?1:0)}}catch(e){C=!0,R=e}finally{try{T||null==z.return||z.return()}finally{if(C)throw R}}if(null==t.at){var G=A.current||jt.end(e,[]);rr.select(e,G)}b.unref(),A.unref()}}}))},unsetNodes:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Array.isArray(t)||(t=[t]);var n={},o=!0,i=!1,a=void 0;try{for(var s,u=t[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var c=s.value;n[c]=null}}catch(e){i=!0,a=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}rr.setNodes(e,n,r)},unwrapNodes:function(e,t){jt.withoutNormalizing(e,(function(){var r=t.mode,n=void 0===r?"lowest":r,o=t.split,i=void 0!==o&&o,a=t.voids,s=void 0!==a&&a,c=t.at,f=void 0===c?e.selection:c,l=t.match;if(f){null==l&&(l=Rt.isPath(f)?Xt(e,f):function(t){return jt.isBlock(e,t)}),Rt.isPath(f)&&(f=jt.range(e,f));for(var h=Wt.isRange(f)?jt.rangeRef(e,f):null,d=jt.nodes(e,{at:f,match:l,mode:n,voids:s}),v=Array.from(d,(function(t){var r=u(t,2)[1];return jt.pathRef(e,r)})),p=function(){var t=g[y].unref(),r=jt.node(e,t),n=u(r,1)[0],o=jt.range(e,t);i&&h&&(o=Wt.intersection(h.current,o)),rr.liftNodes(e,{at:o,match:function(e){return n.children.includes(e)},voids:s})},y=0,g=v;y<g.length;y++)p();h&&h.unref()}}))},wrapNodes:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};jt.withoutNormalizing(e,(function(){var n=r.mode,o=void 0===n?"lowest":n,i=r.split,a=void 0!==i&&i,s=r.voids,c=void 0!==s&&s,f=r.match,l=r.at,h=void 0===l?e.selection:l;if(h){if(null==f&&(f=Rt.isPath(h)?Xt(e,h):e.isInline(t)?function(t){return jt.isInline(e,t)||Ut.isText(t)}:function(t){return jt.isBlock(e,t)}),a&&Wt.isRange(h)){var d=Wt.edges(h),v=u(d,2),p=v[0],y=v[1],g=jt.rangeRef(e,h,{affinity:"inward"});rr.splitNodes(e,{at:y,match:f,voids:c}),rr.splitNodes(e,{at:p,match:f,voids:c}),h=g.unref(),null==r.at&&rr.select(e,h)}for(var m=0,b=Array.from(jt.nodes(e,{at:h,match:e.isInline(t)?function(t){return jt.isBlock(e,t)}:function(e){return jt.isEditor(e)},mode:"lowest",voids:c}));m<b.length;m++){var w=u(b[m],2)[1],x=Wt.isRange(h)?Wt.intersection(h,jt.range(e,w)):h;if(x){var O=Array.from(jt.nodes(e,{at:x,match:f,mode:o,voids:c}));O.length>0&&function(){var r=u(O,1)[0],n=O[O.length-1],o=u(r,2)[1],i=u(n,2)[1],a=Rt.equals(o,i)?Rt.parent(o):Rt.common(o,i),s=jt.range(e,o,i),f=jt.node(e,a),l=u(f,1)[0],h=a.length+1,d=Rt.next(i.slice(0,h)),v=Zt({},t,{children:[]});rr.insertNodes(e,v,{at:d,voids:c}),rr.moveNodes(e,{at:s,match:function(e){return l.children.includes(e)},to:d.concat(0),voids:c})}()}}}}))}},Qt=function(e,t){if(Wt.isCollapsed(t))return t.anchor;var r=Wt.edges(t),n=u(r,2)[1],o=jt.pointRef(e,n);return rr.delete(e,{at:t}),o.unref()},Xt=function(e,t){var r=jt.node(e,t),n=u(r,1)[0];return function(e){return e===n}};function er(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var rr=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},{transform:function(e,t){e.children=at(e.children);var r=e.selection&&at(e.selection);switch(t.type){case"insert_node":var n=t.path,i=t.node,a=Nt.parent(e,n),s=n[n.length-1];if(a.children.splice(s,0,i),r){var c=!0,f=!1,l=void 0;try{for(var h,d=Wt.points(r)[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var v=u(h.value,2),p=v[0];r[v[1]]=It.transform(p,t)}}catch(e){f=!0,l=e}finally{try{c||null==d.return||d.return()}finally{if(f)throw l}}}break;case"insert_text":var y=t.path,g=t.offset,m=t.text,b=Nt.leaf(e,y),w=b.text.slice(0,g),x=b.text.slice(g);if(b.text=w+m+x,r){var O=!0,k=!1,P=void 0;try{for(var E,F=Wt.points(r)[Symbol.iterator]();!(O=(E=F.next()).done);O=!0){var j=u(E.value,2),A=j[0];r[j[1]]=It.transform(A,t)}}catch(e){k=!0,P=e}finally{try{O||null==F.return||F.return()}finally{if(k)throw P}}}break;case"merge_node":var S=t.path,D=Nt.get(e,S),N=Rt.previous(S),_=Nt.get(e,N),T=Nt.parent(e,S),C=S[S.length-1];if(Ut.isText(D)&&Ut.isText(_))_.text+=D.text;else{if(Ut.isText(D)||Ut.isText(_))throw new Error('Cannot apply a "merge_node" operation at path ['.concat(S,"] to nodes of different interaces: ").concat(D," ").concat(_));var R;(R=_.children).push.apply(R,o(D.children))}if(T.children.splice(C,1),r){var B=!0,z=!1,q=void 0;try{for(var I,L=Wt.points(r)[Symbol.iterator]();!(B=(I=L.next()).done);B=!0){var M=u(I.value,2),W=M[0];r[M[1]]=It.transform(W,t)}}catch(e){z=!0,q=e}finally{try{B||null==L.return||L.return()}finally{if(z)throw q}}}break;case"move_node":var V=t.path,J=t.newPath;if(Rt.isAncestor(V,J))throw new Error("Cannot move a path [".concat(V,"] to new path [").concat(J,"] because the destination is inside itself."));var G=Nt.get(e,V),K=Nt.parent(e,V),Y=V[V.length-1];K.children.splice(Y,1);var $=Rt.transform(V,t),Z=Nt.get(e,Rt.parent($)),H=$[$.length-1];if(Z.children.splice(H,0,G),r){var Q=!0,X=!1,ee=void 0;try{for(var te,re=Wt.points(r)[Symbol.iterator]();!(Q=(te=re.next()).done);Q=!0){var ne=u(te.value,2),oe=ne[0];r[ne[1]]=It.transform(oe,t)}}catch(e){X=!0,ee=e}finally{try{Q||null==re.return||re.return()}finally{if(X)throw ee}}}break;case"remove_node":var ie=t.path,ae=ie[ie.length-1];if(Nt.parent(e,ie).children.splice(ae,1),r){var se=!0,ue=!1,ce=void 0;try{for(var fe,le=Wt.points(r)[Symbol.iterator]();!(se=(fe=le.next()).done);se=!0){var he=u(fe.value,2),de=he[0],ve=he[1],pe=It.transform(de,t);if(null!=r&&null!=pe)r[ve]=pe;else{var ye=void 0,ge=void 0,me=!0,be=!1,we=void 0;try{for(var xe,Oe=Nt.texts(e)[Symbol.iterator]();!(me=(xe=Oe.next()).done);me=!0){var ke=u(xe.value,2),Pe=ke[0],Ee=ke[1];if(-1!==Rt.compare(Ee,ie)){ge=[Pe,Ee];break}ye=[Pe,Ee]}}catch(e){be=!0,we=e}finally{try{me||null==Oe.return||Oe.return()}finally{if(be)throw we}}ye?(de.path=ye[1],de.offset=ye[0].text.length):ge?(de.path=ge[1],de.offset=0):r=null}}}catch(e){ue=!0,ce=e}finally{try{se||null==le.return||le.return()}finally{if(ue)throw ce}}}break;case"remove_text":var Fe=t.path,je=t.offset,Ae=t.text,Se=Nt.leaf(e,Fe),De=Se.text.slice(0,je),Ne=Se.text.slice(je+Ae.length);if(Se.text=De+Ne,r){var _e=!0,Te=!1,Ce=void 0;try{for(var Re,Be=Wt.points(r)[Symbol.iterator]();!(_e=(Re=Be.next()).done);_e=!0){var ze=u(Re.value,2),qe=ze[0];r[ze[1]]=It.transform(qe,t)}}catch(e){Te=!0,Ce=e}finally{try{_e||null==Be.return||Be.return()}finally{if(Te)throw Ce}}}break;case"set_node":var Ie=t.path,Le=t.newProperties;if(0===Ie.length)throw new Error("Cannot set properties on the root node!");var Me=Nt.get(e,Ie);for(var We in Le){if("children"===We||"text"===We)throw new Error('Cannot set the "'.concat(We,'" property of nodes!'));var Ve=Le[We];null==Ve?delete Me[We]:Me[We]=Ve}break;case"set_selection":var Je=t.newProperties;if(null==Je)r=Je;else if(null==r){if(!Wt.isRange(Je))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(JSON.stringify(Je)," when there is no current selection."));r=Je}else Object.assign(r,Je);break;case"split_node":var Ge=t.path,Ue=t.position,Ke=t.properties;if(0===Ge.length)throw new Error('Cannot apply a "split_node" operation at path ['.concat(Ge,"] because the root node cannot be split."));var Ye,$e=Nt.get(e,Ge),Ze=Nt.parent(e,Ge),He=Ge[Ge.length-1];if(Ut.isText($e)){var Qe=$e.text.slice(0,Ue),Xe=$e.text.slice(Ue);$e.text=Qe,Ye=Yt({},$e,{},Ke,{text:Xe})}else{var et=$e.children.slice(0,Ue),tt=$e.children.slice(Ue);$e.children=et,Ye=Yt({},$e,{},Ke,{children:tt})}if(Ze.children.splice(He+1,0,Ye),r){var rt=!0,nt=!1,ot=void 0;try{for(var it,ut=Wt.points(r)[Symbol.iterator]();!(rt=(it=ut.next()).done);rt=!0){var ct=u(it.value,2),ft=ct[0];r[ct[1]]=It.transform(ft,t)}}catch(e){nt=!0,ot=e}finally{try{rt||null==ut.return||ut.return()}finally{if(nt)throw ot}}}}e.children=st(e.children),e.selection=r?U(r)?st(r):r:null}},{},Ht,{},{collapse:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.edge,n=void 0===r?"anchor":r,o=e.selection;if(o)if("anchor"===n)rr.select(e,o.anchor);else if("focus"===n)rr.select(e,o.focus);else if("start"===n){var i=Wt.edges(o),a=u(i,1),s=a[0];rr.select(e,s)}else if("end"===n){var c=Wt.edges(o),f=u(c,2),l=f[1];rr.select(e,l)}},deselect:function(e){var t=e.selection;t&&e.apply({type:"set_selection",properties:t,newProperties:null})},move:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.selection,n=t.distance,o=void 0===n?1:n,i=t.unit,a=void 0===i?"character":i,s=t.reverse,u=void 0!==s&&s,c=t.edge,f=void 0===c?null:c;if(r){"start"===f&&(f=Wt.isBackward(r)?"focus":"anchor"),"end"===f&&(f=Wt.isBackward(r)?"anchor":"focus");var l=r.anchor,h=r.focus,d={distance:o,unit:a},v={};if(null==f||"anchor"===f){var p=u?jt.before(e,l,d):jt.after(e,l,d);p&&(v.anchor=p)}if(null==f||"focus"===f){var y=u?jt.before(e,h,d):jt.after(e,h,d);y&&(v.focus=y)}rr.setSelection(e,v)}},select:function(e,t){var r=e.selection;if(t=jt.range(e,t),r)rr.setSelection(e,t);else{if(!Wt.isRange(t))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(JSON.stringify(t)));e.apply({type:"set_selection",properties:r,newProperties:t})}},setPoint:function(e,t,r){var n=e.selection,o=r.edge,i=void 0===o?"both":o;if(n){"start"===i&&(i=Wt.isBackward(n)?"focus":"anchor"),"end"===i&&(i=Wt.isBackward(n)?"anchor":"focus");var a=n.anchor,s=n.focus,u="anchor"===i?a:s;rr.setSelection(e,c({},"anchor"===i?"anchor":"focus",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?er(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):er(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},u,{},t)))}},setSelection:function(e,t){var r=e.selection,n={},o={};if(r){for(var i in t)("anchor"===i&&null!=t.anchor&&!It.equals(t.anchor,r.anchor)||"focus"===i&&null!=t.focus&&!It.equals(t.focus,r.focus)||"anchor"!==i&&"focus"!==i&&t[i]!==r[i])&&(n[i]=r[i],o[i]=t[i]);Object.keys(n).length>0&&e.apply({type:"set_selection",properties:n,newProperties:o})}}},{},{delete:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};jt.withoutNormalizing(e,(function(){var r=t.reverse,n=void 0!==r&&r,o=t.unit,i=void 0===o?"character":o,a=t.distance,s=void 0===a?1:a,c=t.voids,f=void 0!==c&&c,l=t.at,h=void 0===l?e.selection:l,d=t.hanging,v=void 0!==d&&d;if(h){if(Wt.isRange(h)&&Wt.isCollapsed(h)&&(h=h.anchor),It.isPoint(h)){var p=jt.void(e,{at:h,mode:"highest"});if(!f&&p){h=u(p,2)[1]}else{var y={unit:i,distance:s};h={anchor:h,focus:n?jt.before(e,h,y)||jt.start(e,[]):jt.after(e,h,y)||jt.end(e,[])},v=!0}}if(Rt.isPath(h))rr.removeNodes(e,{at:h,voids:f});else if(!Wt.isCollapsed(h)){v||(h=jt.unhangRange(e,h,{voids:f}));var g=Wt.edges(h),m=u(g,2),b=m[0],w=m[1],x=jt.above(e,{match:function(t){return jt.isBlock(e,t)},at:b,voids:f}),O=jt.above(e,{match:function(t){return jt.isBlock(e,t)},at:w,voids:f}),k=x&&O&&!Rt.equals(x[1],O[1]),P=Rt.equals(b.path,w.path),E=f?null:jt.void(e,{at:b,mode:"highest"}),F=f?null:jt.void(e,{at:w,mode:"highest"});if(E){var j=jt.before(e,b);j&&x&&Rt.isAncestor(x[1],j.path)&&(b=j)}if(F){var A=jt.after(e,w);A&&O&&Rt.isAncestor(O[1],A.path)&&(w=A)}var S,D=[],N=!0,_=!1,T=void 0;try{for(var C,R=jt.nodes(e,{at:h,voids:f})[Symbol.iterator]();!(N=(C=R.next()).done);N=!0){var B=C.value,z=u(B,2),q=z[0],I=z[1];S&&0===Rt.compare(I,S)||(!f&&jt.isVoid(e,q)||!Rt.isCommon(I,b.path)&&!Rt.isCommon(I,w.path))&&(D.push(B),S=I)}}catch(e){_=!0,T=e}finally{try{N||null==R.return||R.return()}finally{if(_)throw T}}var L=Array.from(D,(function(t){var r=u(t,2)[1];return jt.pathRef(e,r)})),M=jt.pointRef(e,b),W=jt.pointRef(e,w);if(!P&&!E){var V=M.current,J=jt.leaf(e,V),G=u(J,1)[0],U=V.path,K=b.offset,Y=G.text.slice(K);e.apply({type:"remove_text",path:U,offset:K,text:Y})}for(var $=0,Z=L;$<Z.length;$++){var H=Z[$].unref();rr.removeNodes(e,{at:H,voids:f})}if(!F){var Q=W.current,X=jt.leaf(e,Q),ee=u(X,1)[0],te=Q.path,re=P?b.offset:0,ne=ee.text.slice(re,w.offset);e.apply({type:"remove_text",path:te,offset:re,text:ne})}!P&&k&&W.current&&M.current&&rr.mergeNodes(e,{at:W.current,hanging:!0,voids:f});var oe=W.unref()||M.unref();null==t.at&&oe&&rr.select(e,oe)}}}))},insertFragment:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};jt.withoutNormalizing(e,(function(){var n=r.hanging,o=void 0!==n&&n,i=r.voids,a=void 0!==i&&i,s=r.at,c=void 0===s?e.selection:s;if(t.length&&c){if(Wt.isRange(c))if(o||(c=jt.unhangRange(e,c)),Wt.isCollapsed(c))c=c.anchor;else{var f=Wt.edges(c),l=u(f,2)[1];if(!a&&jt.void(e,{at:l}))return;var h=jt.pointRef(e,l);rr.delete(e,{at:c}),c=h.unref()}else Rt.isPath(c)&&(c=jt.start(e,c));if(a||!jt.void(e,{at:c})){var d=jt.above(e,{at:c,match:function(t){return jt.isInline(e,t)},mode:"highest",voids:a});if(d){var v=u(d,2)[1];if(jt.isEnd(e,c,v))c=jt.after(e,v);else if(jt.isStart(e,c,v)){c=jt.before(e,v)}}var p=jt.above(e,{match:function(t){return jt.isBlock(e,t)},at:c,voids:a}),y=u(p,2)[1],g=jt.isStart(e,c,y),m=jt.isEnd(e,c,y),b=!g||g&&m,w=!m,x=Nt.first({children:t},[]),O=u(x,2)[1],k=Nt.last({children:t},[]),P=u(k,2)[1],E=[],F=function(t){var r=u(t,2),n=r[0],o=r[1];return!(b&&Rt.isAncestor(o,O)&&At.isElement(n)&&!e.isVoid(n)&&!e.isInline(n))&&!(w&&Rt.isAncestor(o,P)&&At.isElement(n)&&!e.isVoid(n)&&!e.isInline(n))},j=!0,A=!1,S=void 0;try{for(var D,N=Nt.nodes({children:t},{pass:F})[Symbol.iterator]();!(j=(D=N.next()).done);j=!0){var _=D.value;_[1].length>0&&F(_)&&E.push(_)}}catch(e){A=!0,S=e}finally{try{j||null==N.return||N.return()}finally{if(A)throw S}}for(var T=[],C=[],R=[],B=!0,z=!1,q=0,I=E;q<I.length;q++){var L=u(I[q],1)[0];At.isElement(L)&&!e.isInline(L)?(B=!1,z=!0,C.push(L)):B?T.push(L):R.push(L)}var M=jt.nodes(e,{at:c,match:function(t){return Ut.isText(t)||jt.isInline(e,t)},mode:"highest",voids:a}),W=u(M,1)[0],V=u(W,2)[1],J=jt.isStart(e,c,V),G=jt.isEnd(e,c,V),U=jt.pathRef(e,m?Rt.next(y):y),K=jt.pathRef(e,G?Rt.next(V):V);rr.splitNodes(e,{at:c,match:function(t){return z?jt.isBlock(e,t):Ut.isText(t)||jt.isInline(e,t)},mode:z?"lowest":"highest",voids:a});var Y=jt.pathRef(e,!J||J&&G?Rt.next(V):V);if(rr.insertNodes(e,T,{at:Y.current,match:function(t){return Ut.isText(t)||jt.isInline(e,t)},mode:"highest",voids:a}),rr.insertNodes(e,C,{at:U.current,match:function(t){return jt.isBlock(e,t)},mode:"lowest",voids:a}),rr.insertNodes(e,R,{at:K.current,match:function(t){return Ut.isText(t)||jt.isInline(e,t)},mode:"highest",voids:a}),!r.at){var $;$=R.length>0?Rt.previous(K.current):C.length>0?Rt.previous(U.current):Rt.previous(Y.current);var Z=jt.end(e,$);rr.select(e,Z)}Y.unref(),U.unref(),K.unref()}}}))},insertText:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};jt.withoutNormalizing(e,(function(){var n=r.voids,o=void 0!==n&&n,i=r.at,a=void 0===i?e.selection:i;if(a){if(Rt.isPath(a)&&(a=jt.range(e,a)),Wt.isRange(a))if(Wt.isCollapsed(a))a=a.anchor;else{var s=Wt.end(a);if(!o&&jt.void(e,{at:s}))return;var u=jt.pointRef(e,s);rr.delete(e,{at:a,voids:o}),a=u.unref(),rr.setSelection(e,{anchor:a,focus:a})}if(o||!jt.void(e,{at:a})){var c=a,f=c.path,l=c.offset;e.apply({type:"insert_text",path:f,offset:l,text:t})}}}))}});function nr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function or(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nr(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ir=function(e){switch(e.type){case"insert_text":case"remove_text":case"set_node":var t=e.path;return Rt.levels(t);case"insert_node":var r=e.node,n=e.path,i=Rt.levels(n),a=Ut.isText(r)?[]:Array.from(Nt.nodes(r),(function(e){var t=u(e,2)[1];return n.concat(t)}));return[].concat(o(i),o(a));case"merge_node":var s=e.path,c=Rt.ancestors(s),f=Rt.previous(s);return[].concat(o(c),[f]);case"move_node":var l=e.path,h=e.newPath;if(Rt.equals(l,h))return[];var d=[],v=[],p=!0,y=!1,g=void 0;try{for(var m,b=Rt.ancestors(l)[Symbol.iterator]();!(p=(m=b.next()).done);p=!0){var w=m.value,x=Rt.transform(w,e);d.push(x)}}catch(e){y=!0,g=e}finally{try{p||null==b.return||b.return()}finally{if(y)throw g}}var O=!0,k=!1,P=void 0;try{for(var E,F=Rt.ancestors(h)[Symbol.iterator]();!(O=(E=F.next()).done);O=!0){var j=E.value,A=Rt.transform(j,e);v.push(A)}}catch(e){k=!0,P=e}finally{try{O||null==F.return||F.return()}finally{if(k)throw P}}return[].concat(d,v);case"remove_node":var S=e.path,D=Rt.ancestors(S);return o(D);case"split_node":var N=e.path,_=Rt.levels(N),T=Rt.next(N);return[].concat(o(_),[T]);default:return[]}};e.Editor=jt,e.Element=At,e.Location=St,e.Node=Nt,e.Operation=Ct,e.Path=Rt,e.PathRef=Bt,e.Point=It,e.PointRef=Lt,e.Range=Wt,e.RangeRef=Vt,e.Span=Dt,e.Text=Ut,e.Transforms=rr,e.createEditor=function(){var e={children:[],operations:[],selection:null,marks:null,isInline:function(){return!1},isVoid:function(){return!1},onChange:function(){},apply:function(t){var r=!0,n=!1,o=void 0;try{for(var i,a=jt.pathRefs(e)[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var s=i.value;Bt.transform(s,t)}}catch(e){n=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw o}}var u=!0,c=!1,f=void 0;try{for(var l,h=jt.pointRefs(e)[Symbol.iterator]();!(u=(l=h.next()).done);u=!0){var d=l.value;Lt.transform(d,t)}}catch(e){c=!0,f=e}finally{try{u||null==h.return||h.return()}finally{if(c)throw f}}var v=!0,p=!1,y=void 0;try{for(var g,m=jt.rangeRefs(e)[Symbol.iterator]();!(v=(g=m.next()).done);v=!0){var b=g.value;Vt.transform(b,t)}}catch(e){p=!0,y=e}finally{try{v||null==m.return||m.return()}finally{if(p)throw y}}var w=new Set,x=[],O=function(e){if(e){var t=e.join(",");w.has(t)||(w.add(t),x.push(e))}},k=ct.get(e)||[],P=ir(t),E=!0,F=!1,j=void 0;try{for(var A,S=k[Symbol.iterator]();!(E=(A=S.next()).done);E=!0){var D=A.value;O(Rt.transform(D,t))}}catch(e){F=!0,j=e}finally{try{E||null==S.return||S.return()}finally{if(F)throw j}}var N=!0,_=!1,T=void 0;try{for(var C,R=P[Symbol.iterator]();!(N=(C=R.next()).done);N=!0){O(C.value)}}catch(e){_=!0,T=e}finally{try{N||null==R.return||R.return()}finally{if(_)throw T}}ct.set(e,x),jt.transform(e,t),e.operations.push(t),jt.normalize(e),"set_selection"===t.type&&(e.marks=null),ft.get(e)||(ft.set(e,!0),Promise.resolve().then((function(){ft.set(e,!1),e.onChange(),e.operations=[]})))},addMark:function(t,r){var n=e.selection;if(n)if(Wt.isExpanded(n))rr.setNodes(e,c({},t,r),{match:Ut.isText,split:!0});else{var o=or({},jt.marks(e)||{},c({},t,r));e.marks=o,e.onChange()}},deleteBackward:function(t){var r=e.selection;r&&Wt.isCollapsed(r)&&rr.delete(e,{unit:t,reverse:!0})},deleteForward:function(t){var r=e.selection;r&&Wt.isCollapsed(r)&&rr.delete(e,{unit:t})},deleteFragment:function(){var t=e.selection;t&&Wt.isExpanded(t)&&rr.delete(e)},getFragment:function(){var t=e.selection;return t?Nt.fragment(e,t):[]},insertBreak:function(){rr.splitNodes(e,{always:!0})},insertFragment:function(t){rr.insertFragment(e,t)},insertNode:function(t){rr.insertNodes(e,t)},insertText:function(t){var r=e.selection,n=e.marks;if(r){if(Wt.isCollapsed(r)){var o=jt.above(e,{match:function(t){return jt.isInline(e,t)},mode:"highest"});if(o){var i=u(o,2)[1];if(jt.isEnd(e,r.anchor,i)){var a=jt.after(e,i);rr.setSelection(e,{anchor:a,focus:a})}}}if(n){var s=or({text:t},n);rr.insertNodes(e,s)}else rr.insertText(e,t);e.marks=null}},normalizeNode:function(t){var r=u(t,2),n=r[0],o=r[1];if(!Ut.isText(n))if(At.isElement(n)&&0===n.children.length){rr.insertNodes(e,{text:""},{at:o.concat(0),voids:!0})}else for(var i=!jt.isEditor(n)&&(At.isElement(n)&&(e.isInline(n)||0===n.children.length||Ut.isText(n.children[0])||e.isInline(n.children[0]))),a=0,s=0;s<n.children.length;s++,a++){var c=n.children[s],f=n.children[s-1],l=s===n.children.length-1;if((Ut.isText(c)||At.isElement(c)&&e.isInline(c))!==i)rr.removeNodes(e,{at:o.concat(a),voids:!0}),a--;else if(At.isElement(c)){if(e.isInline(c))if(null!=f&&Ut.isText(f)){if(l){rr.insertNodes(e,{text:""},{at:o.concat(a+1),voids:!0}),a++}}else{rr.insertNodes(e,{text:""},{at:o.concat(a),voids:!0}),a++}}else null!=f&&Ut.isText(f)&&(Ut.equals(c,f,{loose:!0})?(rr.mergeNodes(e,{at:o.concat(a),voids:!0}),a--):""===f.text?(rr.removeNodes(e,{at:o.concat(a-1),voids:!0}),a--):l&&""===c.text&&(rr.removeNodes(e,{at:o.concat(a),voids:!0}),a--))}},removeMark:function(t){var r=e.selection;if(r)if(Wt.isExpanded(r))rr.unsetNodes(e,t,{match:Ut.isText,split:!0});else{var n=or({},jt.marks(e)||{});delete n[t],e.marks=n,e.onChange()}}};return e},Object.defineProperty(e,"__esModule",{value:!0})}));
