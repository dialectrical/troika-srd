"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.exhaustTap = void 0;
const rxjs_1 = require("rxjs");
const operators_1 = require("rxjs/operators");
const endWith_1 = require("./endWith");
function exhaustTap(next) {
    return (source) => source.pipe(operators_1.publishReplay(1, undefined, (published) => published.pipe(operators_1.exhaustMap((value) => rxjs_1.concat(published, rxjs_1.NEVER).pipe(operators_1.takeUntil(rxjs_1.from(next(value)).pipe(operators_1.ignoreElements(), endWith_1.endWith(null))), operators_1.toArray(), operators_1.mergeAll())))));
}
exports.exhaustTap = exhaustTap;
//# sourceMappingURL=exhaustTap.js.map