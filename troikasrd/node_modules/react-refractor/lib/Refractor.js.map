{"version":3,"sources":["../src/Refractor.js"],"names":["React","require","PropTypes","fract","mapChildren","addMarkers","h","createElement","Refractor","props","process","env","NODE_ENV","registered","language","console","warn","langClassName","codeProps","className","preProps","filter","Boolean","join","inline","style","display","ast","highlight","value","markers","length","map","depth","code","propTypes","string","bool","isRequired","arrayOf","oneOfType","number","shape","line","component","node","func","defaultProps","registerLanguage","lang","register","hasLanguage","module","exports"],"mappings":"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","sourcesContent":["const React = require('react')\nconst PropTypes = require('prop-types')\nconst fract = require('refractor/core.js')\nconst mapChildren = require('./mapChildren')\nconst addMarkers = require('./addMarkers')\n\n// eslint-disable-next-line id-length\nconst h = React.createElement\n\nfunction Refractor(props) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (!fract.registered(props.language)) {\n      // eslint-disable-next-line no-console\n      console.warn(\n        `No language definitions for \"${props.language}\" seems to be registered, did you forget to call \\`Refractor.registerLanguage()\\`?`\n      )\n    }\n  }\n\n  const langClassName = `language-${props.language}`\n  const codeProps = {className: langClassName}\n  const preProps = {className: [props.className, langClassName].filter(Boolean).join(' ')}\n\n  if (props.inline) {\n    codeProps.style = {display: 'inline'}\n    codeProps.className = props.className\n  }\n\n  let ast = fract.highlight(props.value, props.language)\n  if (props.markers && props.markers.length > 0) {\n    ast = addMarkers(ast, {markers: props.markers})\n  }\n\n  const value = ast.length === 0 ? props.value : ast.map(mapChildren.depth(0))\n\n  const code = h('code', codeProps, value)\n  return props.inline ? code : h('pre', preProps, code)\n}\n\nRefractor.propTypes = {\n  className: PropTypes.string,\n  inline: PropTypes.bool,\n  language: PropTypes.string.isRequired,\n  value: PropTypes.string.isRequired,\n  markers: PropTypes.arrayOf(\n    PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.shape({\n        line: PropTypes.number.isRequired,\n        className: PropTypes.string,\n        component: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n      }),\n    ])\n  ),\n}\n\nRefractor.defaultProps = {\n  className: 'refractor',\n  inline: false,\n}\n\nRefractor.registerLanguage = (lang) => fract.register(lang)\nRefractor.hasLanguage = (lang) => fract.registered(lang)\n\nmodule.exports = Refractor\n"],"file":"Refractor.js"}