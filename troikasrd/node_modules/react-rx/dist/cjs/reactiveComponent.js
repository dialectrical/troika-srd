"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.forwardRef = exports.reactiveComponent = void 0;
var displayName_1 = require("./displayName");
var useAsObservable_1 = require("./useAsObservable");
var useObservable_1 = require("./useObservable");
var react_1 = require("react");
function fromComponent(component) {
    var wrappedComponent = function (props) {
        return react_1.createElement(react_1.Fragment, null, useObservable_1.useObservable(react_1.useRef(component(useAsObservable_1.useAsObservable(props))).current));
    };
    wrappedComponent.displayName = displayName_1.wrapDisplayName(component, 'reactiveComponent');
    return wrappedComponent;
}
function fromObservable(input$) {
    return function ReactiveComponent() {
        return react_1.createElement(react_1.Fragment, null, useObservable_1.useObservable(input$));
    };
}
function reactiveComponent(observableOrComponent) {
    return typeof observableOrComponent === 'function'
        ? fromComponent(observableOrComponent)
        : fromObservable(observableOrComponent);
}
exports.reactiveComponent = reactiveComponent;
function forwardRef(component) {
    var wrappedComponent = react_1.forwardRef(function (props, ref) {
        return react_1.createElement(react_1.Fragment, null, useObservable_1.useObservable(react_1.useRef(component(useAsObservable_1.useAsObservable(props), ref)).current));
    });
    wrappedComponent.displayName = displayName_1.wrapDisplayName(component, 'reactiveComponent');
    return wrappedComponent;
}
exports.forwardRef = forwardRef;
