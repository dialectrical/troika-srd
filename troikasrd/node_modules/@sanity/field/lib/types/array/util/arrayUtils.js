"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.isEqual = isEqual;

var _types = require("@sanity/types");

function isEqual(item, otherItem) {
  if (item === otherItem) {
    return true;
  }

  if (typeof item !== typeof otherItem) {
    return false;
  }

  if (typeof item !== 'object' && !Array.isArray(item)) {
    return item === otherItem;
  }

  if ((0, _types.isKeyedObject)(item) && (0, _types.isKeyedObject)(otherItem) && item._key === otherItem._key) {
    return true;
  }

  if (Array.isArray(item) && Array.isArray(otherItem)) {
    if (item.length !== otherItem.length) {
      return false;
    }

    return item.every((child, i) => isEqual(child, otherItem[i]));
  }

  if (item === null || otherItem === null) {
    return item === otherItem;
  }

  var obj = item;
  var otherObj = otherItem;
  var keys = Object.keys(obj);
  var otherKeys = Object.keys(otherObj);

  if (keys.length !== otherKeys.length) {
    return false;
  }

  return keys.every(keyName => isEqual(item[keyName], otherObj[keyName]));
}