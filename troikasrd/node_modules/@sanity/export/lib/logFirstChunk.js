"use strict";

var miss = require('mississippi');

var debug = require('./debug');

module.exports = () => {
  var firstChunk = true;
  return miss.through((chunk, enc, callback) => {
    if (firstChunk) {
      var string = chunk.toString('utf8').split('\n')[0];
      debug('First chunk received: %s', string.slice(0, 300));
      firstChunk = false;
    }

    callback(null, chunk);
  });
};