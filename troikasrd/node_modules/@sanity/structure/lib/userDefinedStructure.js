"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getUserDefinedDefaultDocumentBuilder = void 0;

var _Document = require("./Document");

var _userStructure = require("./parts/userStructure");

var getUserDefinedDefaultDocumentBuilder = options => {
  var structure = (0, _userStructure.getUserDefinedStructure)();

  if (!structure || !structure.getDefaultDocumentNode) {
    return null;
  }

  if (typeof structure.getDefaultDocumentNode !== 'function') {
    throw new Error('Structure export `getDefaultDocumentNode` must be a function');
  }

  var documentNode = structure.getDefaultDocumentNode(options);

  if (!documentNode) {
    return null;
  }

  var isBuilder = typeof documentNode.serialize === 'function';

  if (!isBuilder && documentNode.type !== 'document') {
    throw new Error('`getDefaultDocumentNode` must return a document or a document builder');
  }

  return isBuilder ? documentNode : new _Document.DocumentBuilder(documentNode);
};

exports.getUserDefinedDefaultDocumentBuilder = getUserDefinedDefaultDocumentBuilder;