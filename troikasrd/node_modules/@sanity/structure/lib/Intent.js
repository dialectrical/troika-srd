"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.defaultIntentChecker = exports.DEFAULT_INTENT_HANDLER = void 0;

var _DocumentList = require("./DocumentList");

var DEFAULT_INTENT_HANDLER = Symbol('Document type list canHandleIntent');
exports.DEFAULT_INTENT_HANDLER = DEFAULT_INTENT_HANDLER;

var defaultIntentChecker = (intentName, params, _ref) => {
  var pane = _ref.pane;
  var isEdit = intentName === 'edit';
  var isCreate = intentName === 'create';
  var typedSpec = pane;
  var paneFilter = typedSpec.options && typedSpec.options.filter || '';
  var paneParams = typedSpec.options && typedSpec.options.params || {};
  var typeNames = typedSpec.schemaTypeName ? [typedSpec.schemaTypeName] : (0, _DocumentList.getTypeNamesFromFilter)(paneFilter, paneParams);
  var initialValueTemplates = typedSpec.initialValueTemplates || [];

  if (isCreate && params.template) {
    return initialValueTemplates.some(tpl => tpl.templateId === params.template);
  }

  return isEdit && params.id && typeNames.includes(params.type) || isCreate && typeNames.includes(params.type);
};

exports.defaultIntentChecker = defaultIntentChecker;
defaultIntentChecker.identity = DEFAULT_INTENT_HANDLER;