"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = assetUrlBuilder;
var sanityUrlMatch = /^https?:\/\/cdn.sanity.\w+\/images\//;

function assetUrlBuilder(url, options) {
  var width = options.width,
      height = options.height,
      fit = options.fit;

  if (!sanityUrlMatch.test(url)) {
    return url;
  }

  if (url.includes('?')) {
    // todo: this is an sanity cdn url that already has parameters specified
    // Consider merging with options instead of just bypassing
    return url;
  }

  var defaultFit = width === height ? 'crop' : 'clip';
  var params = [width && "w=".concat(width), height && "h=".concat(height), "fit=".concat(fit ? fit : defaultFit), 'q=85'].filter(Boolean).join('&');
  return "".concat(url, "?").concat(params);
}