"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.discardChanges = void 0;

var _versionedClient = require("../../../../client/versionedClient");

var discardChanges = {
  disabled: _ref => {
    var snapshots = _ref.snapshots;

    if (!snapshots.draft) {
      return 'NO_CHANGES';
    }

    if (!snapshots.published) {
      return 'NOT_PUBLISHED';
    }

    return false;
  },
  execute: _ref2 => {
    var idPair = _ref2.idPair;
    return _versionedClient.versionedClient.observable.transaction().delete(idPair.draftId).commit({
      tag: 'document.discard-changes'
    });
  }
};
exports.discardChanges = discardChanges;