"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.remoteSnapshots = void 0;

var _rxjs = require("rxjs");

var _operators = require("rxjs/operators");

var _createMemoizer = require("../utils/createMemoizer");

var _memoizedPair = require("./memoizedPair");

var remoteSnapshots = (0, _createMemoizer.memoize)(idPair => {
  return (0, _memoizedPair.memoizedPair)(idPair).pipe((0, _operators.switchMap)(_ref => {
    var published = _ref.published,
        draft = _ref.draft;
    return (0, _rxjs.merge)(published.remoteSnapshot$, draft.remoteSnapshot$);
  }));
}, idPair => idPair.publishedId);
exports.remoteSnapshots = remoteSnapshots;