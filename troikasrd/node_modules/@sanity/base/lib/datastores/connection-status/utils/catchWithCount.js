"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.catchWithCount = catchWithCount;

var _operators = require("rxjs/operators");

function catchWithCount(selector) {
  return input$ => {
    var errors = [];
    var errorOp = (0, _operators.catchError)((err, caught) => {
      errors.push(err);
      return selector(err, errors.length, caught).pipe(errorOp);
    });
    return input$.pipe((0, _operators.tap)(() => {
      errors = [];
    }), errorOp);
  };
}