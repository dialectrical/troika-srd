"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.toggleSidecarOpenState = toggleSidecarOpenState;
exports.isSidecarOpenSetting = void 0;

var _operators = require("rxjs/operators");

var _settings = _interopRequireDefault(require("part:@sanity/base/settings"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// @todo: remove the following line when part imports has been removed from this file
///<reference types="@sanity/types/parts" />
var storageKey = 'sidecar';

var sidecarSettings = _settings.default.forNamespace(storageKey); // Listen to this to determine if the sidecar is open or closed


var isSidecarOpenSetting = sidecarSettings.forKey('isSidecarOpen'); // Call this to flip sidecar state

exports.isSidecarOpenSetting = isSidecarOpenSetting;

function toggleSidecarOpenState() {
  isSidecarOpenSetting.listen().pipe((0, _operators.take)(1)).subscribe(isOpen => {
    var newState = !isOpen;
    isSidecarOpenSetting.set(newState);
  });
}