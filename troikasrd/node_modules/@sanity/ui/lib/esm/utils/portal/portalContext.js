import { createContext } from "react";
import { globalScope } from "../../lib/globalScope";
const key = Symbol.for("@sanity/ui/context/portal");
const elementKey = Symbol.for("@sanity/ui/context/portal/element");
globalScope[elementKey] = null;
const defaultContextValue = {
  version: 0,
  boundaryElement: null,
  get element() {
    if (typeof window === "undefined") {
      return null;
    }
    if (globalScope[elementKey]) {
      return globalScope[elementKey];
    }
    globalScope[elementKey] = document.createElement("div");
    globalScope[elementKey].setAttribute("data-portal", "");
    document.body.appendChild(globalScope[elementKey]);
    return globalScope[elementKey];
  }
};
globalScope[key] = globalScope[key] || createContext(defaultContextValue);
const PortalContext = globalScope[key];
export {
  PortalContext,
  defaultContextValue
};
